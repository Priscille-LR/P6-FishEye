{"version":3,"sources":["scripts/utils/Utils.js","scripts/factory/Tags.js","scripts/models/PhotographerProfileModel.js","scripts/models/HomePageModel.js","scripts/factory/HomePageBuilder.js","scripts/utils/MediaUtils.js","scripts/models/MediumModel.js","scripts/factory/MediaFactory.js","scripts/factory/ContactModal.js","scripts/factory/LightboxMedia.js","scripts/models/PhotographerPageModel.js","scripts/factory/PhotographerPageBuilder.js","scripts/factory/PageFactory.js","scripts/models/AppModel.js","scripts/utils/PhotographersUtils.js","scripts/utils/DataFetcher.js","Router.js","index.js"],"names":["Utils","removeChildOf","node","classToRemove","parentNode","document","querySelector","index","childNodes","length","child","className","removeChild","trapFocusInModal","focusableElements","firstFocusableElement","lastFocusableElement","forEach","focusableElement","addEventListener","e","code","shiftKey","preventDefault","target","focus","currentIndex","indexOf","previousIndex","nextIndex","Tags","constructor","tagsList","appendTags","parentElement","tag","tagItem","createElement","checkboxTag","type","id","setAttribute","ariaChecked","tabIndex","appendChild","labelTag","ariaLabel","innerHTML","addEventOnChange","callback","firstChild","checked","PhotographerProfileModel","photographer","getName","name","getLocation","city","country","getTagline","tagline","getPrice","price","getTags","tags","getPortrait","portrait","getId","HomePageModel","photographersList","getPhotographersList","getTagsList","body","getElementById","main","HomePageBuilder","homePageModel","homePageModelPromise","activeNavTags","render","then","photographers","allTags","renderHeader","renderMain","header","role","renderNavTags","insertBefore","onScrollEvent","goMainButton","window","style","display","scrollY","mainNav","isChecked","tagId","handleTagClick","push","Set","splice","sortPhotographers","selectedPhotographers","activeNavTag","includes","createArticle","createMainTitle","createPhotographersWrapper","title","photographersWrapper","ariaLabelledby","article","appendPhotographerThumbnailPicture","appendPhotographerThumbnailContent","thumbnailPicture","thumbnailContent","photographerTag","mediaEnum","PICTURE","VIDEO","MediaUtils","getMediaSource","medium","source","image","video","getMediumType","extension","split","pop","test","MediumModel","getSource","getTitle","getLikes","likes","getPhotographerId","photographerId","getDate","date","MediaFactory","renderMedium","currentPhotographer","mediumThumbnail","createMediumDisplay","appendThumbnailContent","controls","mediumType","mediumSource","String","media","src","autoplay","alt","mediumThumbnailContent","ContactModal","renderContactModal","createContactModal","eventOnClose","contactModal","ariaModal","ariaHidden","createContactForm","createModalButton","addEventListenerValidate","contactForm","method","createFormFields","fieldset","createFieldset","createLabel","createInputField","createTextArea","forParam","textParam","label","inputField","textAreaInput","modalBody","modalButton","eventOnSubmit","inputs","querySelectorAll","input","validateFieldsFormat","hideErrorMessage","showErrorMessage","closeButton","hideContactModal","validateFields","map","fields","inputValue","value","field","console","log","showContactModal","keepFocusInModal","secondFocusableElement","message","removeAttribute","fieldFormat","emailAddressFormat","messageFormat","outcome","LightboxMedia","mediaList","mediaFactory","renderLightboxMedia","createLightboxMedia","createLightboxMediaBody","lightboxMedia","lightboxBody","appendCloseButton","appendNavButtons","handleNav","appendMediumBox","appendMediumTitle","createNavButton","buttonClass","buttonIcon","accessibleName","button","previousButton","nextButton","showPreviousMedium","showNextMedium","handleKeyboardNav","newIndex","showLightboxMedia","mediumBox","mediumTitle","lightboxMedium","hideLightboxMedia","PhotographerPageModel","getMediaList","PhotographerPageBuilder","photographerPageModel","DATE","POPULARITY","TITLE","photographerPageModelPromise","idPhotographer","activePhotographerTags","selectedMedia","determineCurrentPhotographer","determineCurrentPhotographerMedia","allMedia","renderBanner","renderDropdownMenu","renderSummary","sortBy","SortEnum","banner","renderBannerTags","openContactModal","buttonContact","bannerTags","sortMedia","activePhotographerTag","selectedItem","handleDropdownItemClick","dropdownMenu","createDropdownMenu","dropdown","dropdrownTrigger","dropdrownItems","secondDropdownItem","lastDropdownItem","dropdrownItem","dropdownEvent","classList","contains","closeDropdown","openDropdown","remove","add","item","sortType","sortedMedia","sort","a","b","Date","localeCompare","sortedMedium","createMediumThumbnail","numberOfLikes","stickerSummary","handleLikeButton","likeButton","mediumLikes","totalLikes","parseInt","mediumThumbnailMiniature","displayMediumInLightbox","PageFactoryEnum","HOME","PHOTOGRAPHER","registeredPages","Map","PageFactory","getPage","pageModel","get","AppModel","homePage","getHomePage","getMediaPageModel","PhotographersUtils","getAllTags","json","flat","DataFetcher","dataSource","fetchSource","result","fetch","resp","appPageWrapper","createMediaList","mediaPageModel","dataFetcher","pageFactory","routes","regex","component","appModel","router","location","pathname","find","route"],"mappings":"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","file":"P6-Fisheye.334dc839.js","sourceRoot":"..","sourcesContent":["export class Utils {\n\n    static removeChildOf(node, classToRemove){\n        const parentNode = document.querySelector(node)\n    \n        for (let index = parentNode.childNodes.length - 1; index >= 0 ; index--) {\n            const child = parentNode.childNodes[index];\n            if (child.className == classToRemove) {\n               parentNode.removeChild(child)\n            }\n        }\n    }\n\n\n    static trapFocusInModal(focusableElements, firstFocusableElement, lastFocusableElement) {\n        focusableElements.forEach(focusableElement => {\n            focusableElement.addEventListener('keydown', (e) => {\n                if (e.code === 'Tab' && e.shiftKey) { //going upwards\n                    e.preventDefault();\n                    if (e.target === firstFocusableElement) { //if focus on close button => tab + shift => focus on submit button \n                        lastFocusableElement.focus();\n                    } else {\n                        let currentIndex = focusableElements.indexOf(focusableElement);\n                        let previousIndex = currentIndex - 1;\n                        focusableElements[previousIndex].focus();\n                    }\n                } else if (e.code === 'Tab') {\n                    e.preventDefault();\n                    if (e.target === lastFocusableElement) { //going downwards\n                        firstFocusableElement.focus(); //if focus on submit button => tab => focus on close button\n                    } else {\n                        let currentIndex = focusableElements.indexOf(focusableElement);\n                        let nextIndex = currentIndex + 1;\n                        focusableElements[nextIndex].focus();\n                    }\n                }\n            });\n        });\n    }\n}","export class Tags {\n    /**\n    * @param {Array<string>} tagsList\n    */\n\n    constructor(tagsList) {\n        this.tagsList = tagsList;\n    }\n\n    /**\n     * \n     * @param {HTMLDivElement} parentElement \n     * @param {*} tagsList \n     * @param {*} className \n     */\n    appendTags(parentElement, className) {\n        this.tagsList.forEach(tag => {\n            const tagItem = document.createElement('div');\n            tagItem.className = className;\n\n            const checkboxTag = document.createElement('input');\n            checkboxTag.type = \"checkbox\";\n            checkboxTag.className = \"tag_checkbox\";\n            checkboxTag.id = tag;\n            checkboxTag.setAttribute(\"aria-labelledby\", tag);\n            checkboxTag.ariaChecked = \"false\";\n            checkboxTag.tabIndex = '0';\n            tagItem.appendChild(checkboxTag);\n\n            const labelTag = document.createElement('label');\n            labelTag.className = \"tag_name\";\n            labelTag.setAttribute(\"for\", tag);\n            labelTag.ariaLabel = `#${tag}`;\n            labelTag.innerHTML = `#${tag}`;\n            tagItem.appendChild(labelTag)\n\n            parentElement.appendChild(tagItem);\n        });\n    }\n    /**\n     * \n     * @param {HTMLDivElement} parentElement \n     */\n    addEventOnChange(parentElement, callback) {\n        parentElement.childNodes.forEach(child => {\n            child.addEventListener(\"change\", () => {\n                callback(child.firstChild.checked, child.firstChild.id)\n            });\n        })\n    }\n}\n\n","export class PhotographerProfileModel {\n    constructor(photographer) {\n        this.photographer = photographer;\n    }\n\n    getName() {\n        return this.photographer.name\n    }\n\n    getLocation() {\n        return `${this.photographer.city}, ${this.photographer.country}`\n    }\n\n    getTagline() {\n        return this.photographer.tagline\n    }\n\n    getPrice() {\n        return this.photographer.price\n    }\n\n    getTags() {\n        return this.photographer.tags\n    }\n\n    getPortrait() {\n        return this.photographer.portrait\n    }\n\n    getId() {\n        return this.photographer.id\n    }\n\n}\n\n\n\n\n\n\n\n","import { PhotographerProfileModel } from \"./PhotographerProfileModel\";\n\nexport class HomePageModel {\n\n    /**\n    * @param {Array<PhotographerProfileModel>} photographersList\n    * @param {Array<string>} tagsList\n    */\n    constructor(photographersList, tagsList) {\n        this.photographersList = photographersList;\n        this.tagsList = tagsList;\n    }\n\n\n    getPhotographersList() {\n        return this.photographersList\n    }\n\n\n    getTagsList() {\n        return this.tagsList\n    }\n}","import { Utils } from \"../utils/Utils\";\nimport { Tags } from \"./Tags\";\nimport { PhotographerProfileModel } from \"../models/PhotographerProfileModel\";\nimport { HomePageModel } from \"../models/HomePageModel\";\n\nconst body = document.getElementById(\"page\");\nconst main = document.getElementById('app');\n\nexport class HomePageBuilder {\n    /**\n     * \n     * @param {Promise<HomePageModel>} homePageModel \n     */\n    constructor(homePageModel) {\n        this.homePageModelPromise = homePageModel\n        this.activeNavTags = [];\n    }\n\n    //display header and main (home page)\n    render() {\n        this.homePageModelPromise\n            .then((homePageModel) => {\n                this.photographers = homePageModel.photographersList\n                this.allTags = homePageModel.tagsList\n\n                this.renderHeader();\n                this.renderMain(this.photographers);\n            })\n    }\n\n    renderHeader() {\n        const header = document.createElement('header');\n        header.className = 'header_home';\n        header.role = 'heading';\n        header.ariaLabel = 'Fisheye home page heading';\n        header.innerHTML = `\n        <a class=\"logo\" href=\"/\">\n            <img class=\"logo_img\" src=\"/static/logo.svg\" alt=\"Fisheye Home Page\" />\n        </a>\n        <a class=\"go_main\" href=\"#app\" aria-label=\"go to main content\" tabindex=\"0\">Passer au contenu</a>\n        <nav class=\"main_nav\" role=\"navigation\" aria-label=\"photographers categories\">\n        </nav>\n        `;\n        this.renderNavTags(header.querySelector(\".main_nav\"))\n\n        body.insertBefore(header, main);\n\n        this.onScrollEvent();\n    }\n\n    //go to main button is diplayed if user scrolls on page\n    onScrollEvent() {\n        const goMainButton = document.querySelector('.go_main');\n        window.addEventListener('scroll', () => {\n            goMainButton.style.display = 'block';\n        })\n        if(window.scrollY === 0) {\n            goMainButton.style.display = 'none';\n        }\n    }\n\n    renderNavTags(mainNav) {\n        const tags = new Tags(this.allTags)\n        tags.appendTags(mainNav, 'main_nav__item');\n        tags.addEventOnChange(mainNav, (isChecked, tagId) => this.handleTagClick(isChecked, tagId));\n    }\n\n    handleTagClick(isChecked, tagId) {\n        const checkboxTag = document.getElementById(tagId);\n        if (isChecked) {\n            checkboxTag.setAttribute('aria-checked', 'true');\n            this.activeNavTags.push(tagId);\n            this.activeNavTags = [...new Set(this.activeNavTags)];\n        } else {\n            checkboxTag.setAttribute('aria-checked', 'false');\n            const currentIndex = this.activeNavTags.indexOf(tagId);\n            this.activeNavTags.splice(currentIndex, 1); //remove tag from active tags\n        }\n        \n        Utils.removeChildOf(\".photographers\", \"photographer_thumbnail_wrapper\")\n        this.sortPhotographers(this.photographers)\n    }\n\n    sortPhotographers(photographers) {\n        let selectedPhotographers = [];\n        this.activeNavTags.forEach(activeNavTag => {\n            photographers.forEach(photographer => {\n                if (photographer.getTags().includes(activeNavTag)) {\n                    selectedPhotographers.push(photographer)\n                }\n            });\n        });\n\n        if (this.activeNavTags.length == 0) {\n            this.createArticle(photographers)\n        } else {\n            selectedPhotographers = [...new Set(selectedPhotographers)];\n            this.createArticle(selectedPhotographers)\n        }\n\n    }\n\n    renderMain(photographers) {\n        this.createMainTitle()\n        this.createPhotographersWrapper()\n        this.createArticle(photographers)\n    }\n\n    createMainTitle() {\n        const title = document.createElement('h1')\n        title.className = 'main_title'\n        title.ariaLabel = 'photographers'\n        title.innerHTML = `Nos photographes`\n        main.appendChild(title)\n    }\n\n    createPhotographersWrapper() {\n        const photographersWrapper = document.createElement('div')\n        photographersWrapper.className = 'photographers'\n        photographersWrapper.ariaLabelledby = 'photographers'\n        document.getElementById(\"app\").appendChild(photographersWrapper)\n    }\n\n    /**\n     * create article for each photographer; add their picture and content\n     * @param {Array<PhotographerProfileModel>} photographers \n     */\n    createArticle(photographers) {\n\n        photographers.forEach(photographer => {\n\n            const article = document.createElement('article')\n            article.className = 'photographer_thumbnail_wrapper';\n            article.innerHTML = `<a class=\"photographer_thumbnail\" href=\"/photographers-profile/${photographer.getId()}\" aria-label=\"${photographer.getName()}\">`;\n            article.ariaLabel = `${photographer.getName()}`;\n            this.appendPhotographerThumbnailPicture(article, photographer);\n            this.appendPhotographerThumbnailContent(article, photographer);\n\n            document.querySelector('.photographers').appendChild(article);\n        });\n    }\n\n    /**\n     * \n     * @param {PhotographerProfileModel} photographer \n     */\n    appendPhotographerThumbnailPicture(article, photographer) {\n        const thumbnailPicture = document.createElement('a')\n        thumbnailPicture.className = 'photographer_thumbnail__picture';\n        thumbnailPicture.innerHTML = `\n        <img class=\"photographer_thumbnail__picture\"\n        src=\"/static/Photographers ID Photos/${photographer.getPortrait()}\"\n        alt=\"${photographer.getName()}'s thumbnail picture\" />`;\n\n        article.querySelector('.photographer_thumbnail').appendChild(thumbnailPicture);\n    }\n\n    /**\n     * \n     * @param {PhotographerProfileModel} photographer \n     */\n    appendPhotographerThumbnailContent(article, photographer) {\n        const thumbnailContent = document.createElement('div')\n        thumbnailContent.className = 'photographer_thumbnail__content';\n        thumbnailContent.ariaLabel = `${photographer.getName()} info`\n        thumbnailContent.innerHTML = `\n        <h2 class=\"photographer_name\">${photographer.getName()}</h2>\n        <h3 class=\"photographer_location\">${photographer.getLocation()}</h3>\n        <p class=\"photographer_desc\">${photographer.getTagline()}</p>\n        <p class=\"photographer_price\">${photographer.getPrice()}€/jour</p>\n        <div class=\"tags\"></div>`;\n\n        photographer.getTags().forEach(photographerTag => {\n            const tag = document.createElement('a')\n            tag.className = 'tags__item';\n            tag.innerHTML = `<span>#${photographerTag}</span>`\n            thumbnailContent.querySelector('.tags').appendChild(tag)\n        })\n\n        article.querySelector('.photographer_thumbnail').appendChild(thumbnailContent);\n    }\n}","\nexport const mediaEnum = {\n    PICTURE: \"picture\",\n    VIDEO: \"video\",\n}\n\nexport class MediaUtils {\n\n    static getMediaSource(medium) {\n        let source = medium.image;\n        if (source == null) {\n            source = medium.video;\n        }\n        return source;\n    }\n\n    static getMediumType(medium) {\n        let extension = this.getMediaSource(medium).split('.').pop();\n        if (/(jpg)$/ig.test(extension)) {\n            return mediaEnum.PICTURE;\n        }\n        if (/(mp4)$/ig.test(extension)) {\n            return mediaEnum.VIDEO;\n        }\n    }\n\n}","import { MediaUtils } from \"../utils/MediaUtils\";\n\nexport class MediumModel {\n    constructor(medium) {\n        this.medium = medium;\n    }\n\n    getMediumType() {\n        return MediaUtils.getMediumType(this.medium)\n    }\n\n    getSource() {\n        return MediaUtils.getMediaSource(this.medium)\n    }\n\n    getTitle() {\n        return this.medium.title\n    }\n\n    getPrice() {\n        return this.medium.price\n    }\n\n    getLikes() {\n        return this.medium.likes\n    }\n\n    getTags() {\n        return this.medium.tags\n    }\n\n    getId() {\n        return this.medium.id\n    }\n\n    getPhotographerId() {\n        return this.medium.photographerId\n    }\n    \n    getDate() {\n        return this.medium.date\n    }\n    \n\n}\n\n\n\n\n\n\n\n","import { MediumModel } from \"../models/MediumModel\";\nimport { mediaEnum } from \"../utils/MediaUtils\";\nimport { PhotographerProfileModel } from \"../models/PhotographerProfileModel\";\n\nexport class MediaFactory {\n\n    /**\n     * \n     * @param {MediumModel} medium \n     * @param {PhotographerProfileModel} currentPhotographer \n     * @returns \n     */\n    renderMedium(medium, currentPhotographer) {\n\n        let mediumThumbnail = this.createMediumDisplay(medium, currentPhotographer, \"medium_thumbnail\");\n\n        this.appendThumbnailContent(medium, mediumThumbnail);\n\n        return mediumThumbnail;\n    }\n\n    /**\n     * \n     * @param {MediumModel} medium \n     * @param {PhotographerProfileModel} currentPhotographer \n     * @param {string} className \n     * @param {boolean} controls \n     * @returns \n     */\n    createMediumDisplay(medium, currentPhotographer, className, controls = false) {\n        let mediumThumbnail = document.createElement('article');\n        mediumThumbnail.className = className;\n        mediumThumbnail.ariaLabel = medium.getTitle();\n\n        \n        const mediumType = medium.getMediumType();\n\n        let mediumSource = String(medium.getSource());\n\n        var media;\n        switch (mediumType) {\n            case mediaEnum.PICTURE: {\n                media = document.createElement('img');\n                media.src = `/static/${currentPhotographer.getName().split(' ')[0]}/${mediumSource}`\n                break;\n            }\n            case mediaEnum.VIDEO: {\n                media = document.createElement('video');\n                let source = document.createElement('source');\n                source.src = `/static/${currentPhotographer.getName().split(' ')[0]}/${mediumSource}`\n                source.type = \"video/mp4\"\n                media.controls = controls;\n                if (controls) {\n                    media.autoplay = true\n                }\n                media.appendChild(source);\n                break;\n            }\n            default: mediumSource = String(\"\");\n\n        }\n        media.className = `${className}__miniature`;\n        media.alt = medium.getTitle();\n        media.tabIndex = \"0\";\n        mediumThumbnail.appendChild(media);\n        return mediumThumbnail;\n    }\n\n    appendThumbnailContent(medium, mediumThumbnail) {\n        let mediumThumbnailContent = document.createElement('div');\n        mediumThumbnailContent.className = \"medium_thumbnail__content\";\n        mediumThumbnailContent.innerHTML = `\n            <h2 class=\"medium_title\">${medium.getTitle()}</h2>\n            <div class=\"price_and_likes\">\n              <span class=\"medium_price\" aria-label=\"price\">${medium.getPrice()}€</span>\n              \n              <span class=\"medium_number_of_likes\">${medium.getLikes()}</span>\n                <div class=\"likes\">\n                    <input type=\"checkbox\" id=\"checkbox__input\" class=\"checkbox__input\" name=\"like\" aria-labelledby=\"like this picture\" tabindex=\"0\">\n                        <i class=\"far fa-heart like__unchecked\"></i>\n                        <i class=\"fas fa-heart like__checked\"></i>\n                    </input>   \n                    <label class=\"checkbox__like\" for=\"checkbox__input\" aria-label=\"like this picture\"></label>\n                </div>\n            </div>\n          </div>`;\n\n        mediumThumbnail.appendChild(mediumThumbnailContent);\n    }\n\n\n\n}\n\n\n","import { PhotographerProfileModel } from \"../models/PhotographerProfileModel\";\nimport { Utils } from \"../utils/Utils\";\n\nconst body = document.getElementById(\"page\");\nconst main = document.getElementById('app');\n\n\n\nexport class ContactModal {\n    /**\n     * \n     * @param {PhotographerProfileModel} currentPhotographer \n     */\n    constructor(currentPhotographer) {\n        this.currentPhotographer = currentPhotographer;\n        this.focusableElements = [];\n    }\n\n    //modal creation \n\n    renderContactModal() {\n        this.createContactModal();\n        this.eventOnClose()\n    }\n\n    createContactModal() {\n        const contactModal = document.createElement('dialog');\n        contactModal.className = 'contact_modal';\n        contactModal.setAttribute('role', 'dialog');\n        contactModal.setAttribute('aria-labelledby', 'contact_modal__body__title');\n        contactModal.ariaModal = 'true';\n        contactModal.ariaHidden = 'true';\n        contactModal.tabIndex = \"-1\";\n        contactModal.innerHTML = `\n        <div class=\"contact_modal__body\">\n            <h2 class=\"contact_modal__body__title\">Contactez-moi <br> ${this.currentPhotographer.getName()}</h2>\n            <button id=\"close_contact_modal\" class=\"close_button\" title=\"fermer la fenêtre\" aria-label=\"close dialog\" tabindex=\"-1\">\n                <i class=\"fas fa-times fa-3x\" aria-hidden=\"true\"></i>\n            </button>     \n        </div> \n        `;\n        body.appendChild(contactModal);\n\n        this.focusableElements.push(document.getElementById('close_contact_modal'));\n\n        this.contactModal = document.querySelector('.contact_modal')\n\n        this.createContactForm();\n        this.createModalButton();\n        this.addEventListenerValidate();\n    }\n\n    createContactForm() {\n        const contactForm = document.createElement('form');\n        contactForm.className = 'contact_form';\n        contactForm.method = (\"method\", \"post\");\n        contactForm.setAttribute = (\"action\", \"submit\");\n\n        document.querySelector('.contact_modal__body').appendChild(contactForm);\n\n        this.createFormFields();\n    }\n\n    createFormFields() {\n        const contactForm = document.querySelector('.contact_form')\n\n        //Firstname\n        let fieldset = this.createFieldset();\n        fieldset.appendChild(this.createLabel(\"firstname\", \"Prénom\"));\n        fieldset.appendChild(this.createInputField(\"firstname\"));\n        contactForm.appendChild(fieldset);\n\n\n        //Lastname\n        fieldset = this.createFieldset();\n        fieldset.appendChild(this.createLabel(\"lastname\", \"Nom\"));\n        fieldset.appendChild(this.createInputField(\"lastname\"));\n        contactForm.appendChild(fieldset);\n\n\n        //Email\n        fieldset = this.createFieldset();\n        fieldset.appendChild(this.createLabel(\"email\", \"Email\"));\n        fieldset.appendChild(this.createInputField(\"email\"));\n        contactForm.appendChild(fieldset);\n\n\n        //Message\n        fieldset = this.createFieldset();\n        fieldset.appendChild(this.createLabel(\"message\", \"Votre message\"));\n        fieldset.appendChild(this.createTextArea(\"message\"));\n        contactForm.appendChild(fieldset);\n\n    }\n\n    createFieldset() {\n        const fieldset = document.createElement('div');\n        fieldset.className = 'fieldset';\n        return fieldset;\n    }\n\n    createLabel(forParam, textParam) {\n        const label = document.createElement('label');\n        label.setAttribute(\"for\", forParam);\n        label.innerHTML = `${textParam}`;\n        return label;\n    }\n\n    createInputField(id) {\n        const inputField = document.createElement('input');\n        inputField.className = 'input_field';\n        inputField.type = \"text\";\n        inputField.tabIndex = '-1';\n        inputField.setAttribute(\"id\", id);\n\n        this.focusableElements.push(inputField);\n        return inputField;\n    }\n\n    createTextArea(id) {\n        const textAreaInput = document.createElement('textarea');\n        textAreaInput.className = 'input_field';\n        textAreaInput.setAttribute(\"id\", id);\n        textAreaInput.tabIndex = \"-1\";\n        textAreaInput.setAttribute(\"rows\", 5);\n        this.focusableElements.push(textAreaInput);\n        return textAreaInput;\n    }\n\n    createModalButton() {\n        const modalBody = document.querySelector('.contact_modal__body');\n        const modalButton = document.createElement('button');\n        modalButton.className = 'button_contact submit_button';\n        modalButton.type = \"submit\";\n        modalButton.tabIndex = \"-1\";\n        modalButton.innerHTML = `Envoyer`;\n\n        this.focusableElements.push(modalButton);\n\n        this.eventOnSubmit(modalButton, modalBody);\n\n        document.querySelector('.contact_modal__body').appendChild(modalButton);\n    }\n\n    addEventListenerValidate() {\n        const contactForm = document.querySelector('.contact_form');\n        const inputs = contactForm.querySelectorAll('.input_field');\n\n        inputs.forEach(input => {\n            input.addEventListener('blur', () => {\n                if (this.validateFieldsFormat(input)) {\n                    this.hideErrorMessage(input.parentElement);\n                } else {\n                    if (input.id === \"email\") {\n                        this.showErrorMessage(input.parentElement, 'Veuillez entrer une adresse mail valide')\n                    } else if (input.id === \"message\") {\n                        this.showErrorMessage(input.parentElement, \"Dites-m'en un peu plus...\")\n                    } else {\n                        this.showErrorMessage(input.parentElement, 'Veuillez entrer au moins 2 caractères')\n                    }\n                }\n            });\n        });\n    }\n\n    //modal closing\n\n    eventOnClose() {\n        const closeButton = document.querySelector('.close_button');\n\n        closeButton.addEventListener('click', () => this.hideContactModal());\n\n        closeButton.addEventListener('keydown',(e) => {\n            if(e.code === 'Enter') {\n                this.hideContactModal();\n            }\n        })\n\n        document.addEventListener('keydown', (e) => {\n            if (e.code === 'Escape') {\n                this.hideContactModal();\n            }\n        })\n\n        // main.addEventListener('click', (e) => {\n        //     this.contactModal = document.querySelector('.contact_modal')\n        //     if(e.target === this.contactModal) {\n        //     this.hideContactModal()\n        //     }\n        // });\n    }\n\n    eventOnSubmit(modalButton, modalBody) {\n        modalButton.addEventListener('click', (e) => {\n            const inputs = [...modalBody.querySelectorAll('.input_field')];\n            e.preventDefault();\n            if (this.validateFields(modalBody) === true) {\n                this.hideContactModal();\n                inputs.map(input => {\n                    const fields = {\n                        input: input.id,\n                        inputValue: input.value,\n                    };\n                    return fields;\n                })\n                    .forEach((field) => console.log(field.input + \" : \" + field.inputValue));\n            } else {\n                console.log(\"Merci de rensigner les champs\");\n            }\n        });\n    }\n\n    showContactModal() {\n        const contactModal = document.querySelector('.contact_modal');\n        this.contactModal.style.display = \"block\";\n\n        main.setAttribute('aria-hidden', 'true');\n        contactModal.setAttribute('aria-hidden', 'false');\n\n        this.keepFocusInModal();\n\n    }\n\n    keepFocusInModal() {\n        const firstFocusableElement = this.focusableElements[0]; // close button\n        const secondFocusableElement = this.focusableElements[1]; //first fieldset\n        const lastFocusableElement = this.focusableElements[this.focusableElements.length - 1]; //submit button\n\n        //focus on first input\n        secondFocusableElement.focus();\n\n        //trap focus in modal\n        Utils.trapFocusInModal(this.focusableElements, firstFocusableElement, lastFocusableElement)\n    }\n\n    hideContactModal() {\n        const contactModal = document.querySelector('.contact_modal');\n        this.contactModal.style.display = \"none\";\n        main.setAttribute('aria-hidden', 'false');\n        contactModal.setAttribute('aria-hidden', 'true');\n    }\n\n\n    //fields validation \n\n    //error message is displayed when field is invalid\t\n    showErrorMessage(field, message) {\n        field.setAttribute('data-error', message);\n        field.setAttribute('data-error-visible', 'true');\n    }\n\n    //error message is hidden \n    hideErrorMessage(field) {\n        field.removeAttribute('data-error');\n        field.removeAttribute('data-error-visible');\n    }\n\n    validateFieldsFormat(input) {\n        const fieldFormat = /^[A-Za-z\\-\\sàáâãäåçèéêëìíîïðòóôõöùúûüýÿ']{2,}$/;\n        const emailAddressFormat = /\\S+@\\S+\\.\\S+/;\n        const messageFormat = /^[A-Za-z\\-\\sàáâãäåçèéêëìíîïðòóôõöùúûüýÿ'.,;:!?]{5,500}$/;\n\n        if (input.id === \"email\") {\n            if ((input.value.length != 0) && (emailAddressFormat.test(input.value))) {\n                return true;\n            } else {\n                return false;\n            }\n        }\n        if (input.id === \"message\") {\n            if ((input.value.length != 0) && (messageFormat.test(input.value))) {\n                return true;\n            } else {\n                return false;\n            }\n\n        } else {\n            if ((input.value.length != 0) && (fieldFormat.test(input.value))) {\n                return true;\n            } else {\n                return false;\n            }\n        }\n    }\n\n    validateFields(modalBody) {\n        const inputs = modalBody.querySelectorAll('.input_field');\n        let outcome = true\n        inputs.forEach(input => {\n            if (this.validateFieldsFormat(input) === false) {\n                outcome = false\n            }\n        });\n        return outcome;\n    }\n}","import { MediaFactory } from './MediaFactory';\nimport { MediumModel } from '../models/MediumModel';\nimport { PhotographerProfileModel } from '../models/PhotographerProfileModel';\nimport { Utils } from '../utils/Utils';\n\nconst body = document.getElementById(\"page\");\nconst main = document.getElementById('app');\n\n\nexport class LightboxMedia {\n    \n    /**\n     * @param {Array<MediumModel>} mediaList \n     * @param {PhotographerProfileModel} currentPhotographer \n     */\n    constructor(mediaList = [], currentPhotographer) {\n        this.mediaList = mediaList;\n        this.currentPhotographer = currentPhotographer;\n        this.focusableElements = [];\n        this.mediaFactory = new MediaFactory();\n    }\n\n    renderLightboxMedia() {\n        this.createLightboxMedia();\n        this.createLightboxMediaBody();\n        this.eventOnClose();\n\n        this.lightboxMedia = document.querySelector('.lightbox_media');\n    }\n\n    createLightboxMedia() {\n        const lightboxMedia = document.createElement('dialog');\n        lightboxMedia.className = 'lightbox_media';\n        lightboxMedia.setAttribute('role', 'dialog');\n        lightboxMedia.ariaLabel = \"image close-up view\";\n        lightboxMedia.ariaModal = 'true';\n        lightboxMedia.ariaHidden = 'true';\n        lightboxMedia.tabIndex = \"-1\";\n\n        body.appendChild(lightboxMedia);\n    }\n\n    createLightboxMediaBody() {\n        const lightboxBody = document.createElement('div');\n        lightboxBody.className = 'lightbox_media__body';\n\n        this.appendCloseButton(lightboxBody);\n        this.appendNavButtons(lightboxBody);\n        this.handleNav(lightboxBody);\n        this.appendMediumBox(lightboxBody);\n        this.appendMediumTitle(lightboxBody);\n\n        document.querySelector('.lightbox_media').appendChild(lightboxBody);\n    }\n\n    appendCloseButton(lightboxBody) {\n        const closeButton = document.createElement('button');\n        closeButton.className = 'close_button_lightbox';\n        closeButton.setAttribute('role', 'button');\n        closeButton.setAttribute('title', 'fermer la fenêtre');\n        closeButton.ariaLabel = \"close dialog\";\n        closeButton.tabIndex = \"-1\";\n        closeButton.innerHTML = `<i class=\"fas fa-times fa-3x\"></i>`;\n\n        lightboxBody.appendChild(closeButton);\n\n        this.focusableElements.push(closeButton);\n\n    }\n\n    createNavButton(buttonClass, buttonIcon, accessibleName) {\n        const button = document.createElement('button');\n        button.className = buttonClass;\n        button.innerHTML = `<i class=\"fas ${buttonIcon} fa-3x\"></i>`;\n        button.ariaLabel = accessibleName;\n        button.tabIndex = '-1';\n        return button;\n    }\n\n    appendNavButtons(lightboxBody) {\n        const previousButton = this.createNavButton(\"previous_button\", \"fa-chevron-left\", \"previous image\");\n        const nextButton = this.createNavButton(\"next_button\", \"fa-chevron-right\", \"next image\");\n\n        lightboxBody.appendChild(previousButton);\n        lightboxBody.appendChild(nextButton);\n\n        //add buttons to focusable elements array\n        this.focusableElements.push(previousButton);\n        this.focusableElements.push(nextButton);\n    }\n\n    handleNav(lightboxBody) {\n\n        const previousButton = lightboxBody.querySelector('.previous_button');\n        const nextButton = lightboxBody.querySelector('.next_button');\n\n        previousButton.addEventListener('click', () => {\n            this.showPreviousMedium(lightboxBody, previousButton);\n        });\n\n        nextButton.addEventListener('click', () => {\n            this.showNextMedium(lightboxBody, nextButton);\n        });\n\n        this.handleKeyboardNav(lightboxBody);\n\n    }\n\n    showPreviousMedium(lightboxBody, previousButton) {\n        const currentIndex = this.mediaList.indexOf(this.medium);\n        const newIndex = currentIndex - 1;\n\n        const nextButton = lightboxBody.querySelector('.next_button');\n        nextButton.style.display = \"block\";\n\n        if (newIndex >= 0) {\n            this.showLightboxMedia(this.mediaList[newIndex], this.currentPhotographer, this.mediaList);\n        }\n\n        if (newIndex == 0) {\n            previousButton.style.display = \"none\";\n        }\n    }\n\n    showNextMedium(lightboxBody, nextButton) {\n        const currentIndex = this.mediaList.indexOf(this.medium);\n        const newIndex = currentIndex + 1;\n\n        const previousButton = lightboxBody.querySelector('.previous_button');\n        previousButton.style.display = \"block\";\n\n        if (newIndex <= this.mediaList.length - 1) {\n            this.showLightboxMedia(this.mediaList[newIndex], this.currentPhotographer, this.mediaList);\n        }\n\n        if (newIndex == this.mediaList.length - 1) {\n            nextButton.style.display = \"none\";\n        }\n    }\n\n    handleKeyboardNav(lightboxBody) {\n        const firstFocusableElement = this.focusableElements[0]; //close button\n        const secondFocusableElement = this.focusableElements[1]; //previous button\n        const lastFocusableElement = this.focusableElements[2]; //next button\n\n        const lightboxMedia = document.querySelector('.lightbox_media');\n\n        //navigate with left & right arrows\n        lightboxMedia.addEventListener('keydown', (e) => {\n            e.preventDefault();\n            if (e.code === 'ArrowLeft') {\n                this.showPreviousMedium(lightboxBody, secondFocusableElement);\n            } else if (e.code === 'ArrowRight') {\n                this.showNextMedium(lightboxBody, lastFocusableElement);\n            }\n        });\n\n        //navigate with tab + enter\n        secondFocusableElement.addEventListener('keydown', (e) => {\n            e.preventDefault();\n            if(e.code === 'Enter') {\n                this.showPreviousMedium(lightboxBody, secondFocusableElement);\n            }\n        })\n\n        lastFocusableElement.addEventListener('keydown', (e) => {\n                e.preventDefault();\n            if(e.code === 'Enter') {\n                this.showNextMedium(lightboxBody, lastFocusableElement);\n            }\n        })\n        \n        //trap focus in modal\n        Utils.trapFocusInModal(this.focusableElements, firstFocusableElement, lastFocusableElement);\n    }\n\n    appendMediumBox(lightboxBody) {\n        const nextButton = lightboxBody.querySelector('.next_button');\n        const mediumBox = document.createElement('div');\n        mediumBox.className = \"medium_box\";\n        lightboxBody.insertBefore(mediumBox, nextButton);\n    }\n\n    appendMediumTitle(lightboxBody) {\n        const mediumTitle = document.createElement('h2');\n        mediumTitle.className = 'lightbox_title';\n        lightboxBody.querySelector('.medium_box').appendChild(mediumTitle);\n    }\n\n    showLightboxMedia(medium, currentPhotographer, mediaList) {\n        this.mediaList = mediaList;\n        this.medium = medium;\n        \n        Utils.removeChildOf('.medium_box', 'lightbox_medium');\n        \n        //display lightbox\n        const lightboxMedia = document.querySelector('.lightbox_media');\n        this.lightboxMedia.style.display = \"flex\";\n\n        main.setAttribute('aria-hidden', 'true');\n        lightboxMedia.setAttribute('aria-hidden', 'false');\n\n        //add title dynamically\n        const mediumTitle = document.querySelector('.lightbox_title');\n        mediumTitle.innerHTML = medium.getTitle();\n\n        //display medium \n        const lightboxMedium = this.mediaFactory.createMediumDisplay(medium, currentPhotographer, \"lightbox_medium\", true);\n        lightboxMedium.querySelector(\".lightbox_medium__miniature\").tabIndex = \"-1\"\n        document.querySelector('.medium_box').insertBefore(lightboxMedium, mediumTitle);\n\n        //if first medium is displayed, hide previous button;\n        //if last one, hide next button\n        const previousButton = document.querySelector('.previous_button');\n        const nextButton = document.querySelector('.next_button');\n\n        if(this.mediaList.indexOf(this.medium) == 0) {\n            previousButton.style.display = \"none\";  \n        } else {\n            previousButton.style.display = \"block\";\n        }\n\n        if (this.mediaList.indexOf(this.medium) == this.mediaList.length - 1) {\n            nextButton.style.display = \"none\";\n        } else {\n            nextButton.style.display = \"block\";\n        }\n\n        //focus on close button\n        const closeButton = this.focusableElements[0];\n        closeButton.focus();\n    }\n\n    eventOnClose() {\n        const closeButton = document.querySelector('.close_button_lightbox');\n\n        closeButton.addEventListener('click', () => this.hideLightboxMedia());\n\n        closeButton.addEventListener('keydown',(e) => {\n            if(e.code === 'Enter') {\n                this.hideLightboxMedia();\n            }\n        })\n\n        document.addEventListener('keydown', (e) => {\n            if (e.code === 'Escape') {\n                this.hideLightboxMedia();\n            }\n        });\n    }\n\n    hideLightboxMedia() {\n        const lightboxMedia = document.querySelector('.lightbox_media');\n        this.lightboxMedia.style.display = \"none\";\n        \n        main.setAttribute('aria-hidden', 'false');\n        lightboxMedia.setAttribute('aria-hidden', 'true');\n    }\n\n}\n","import { MediumModel } from \"./MediumModel\";\nimport { PhotographerProfileModel } from \"./PhotographerProfileModel\";\n\nexport class PhotographerPageModel {\n\n    /**\n   * @param {Array<PhotographerProfileModel>} photographersList\n    * @param {Array<MediumModel>} mediaList\n    */\n    constructor(photographersList, mediaList) {\n        this.photographersList = photographersList;\n        this.mediaList = mediaList;\n    }\n\n    getPhotographersList() {\n        return this.photographersList\n    }\n\n    getMediaList() {\n        return this.mediaList\n    }\n}","import { MediaFactory } from './MediaFactory';\nimport { ContactModal } from \"./ContactModal\";\nimport { LightboxMedia } from \"./LightboxMedia\";\nimport { Tags } from \"./Tags\";\nimport { Utils } from \"../utils/Utils\";\nimport { PhotographerPageModel } from \"../models/PhotographerPageModel\";\nimport { PhotographerProfileModel } from '../models/PhotographerProfileModel';\nimport { MediumModel } from '../models/MediumModel';\n\nconst body = document.getElementById(\"page\");\nconst main = document.getElementById('app');\n\nexport class PhotographerPageBuilder {\n\n    SortEnum = {\n        DATE: \"Date\",\n        POPULARITY: \"Popularité\",\n        TITLE: \"Titre\",\n    }\n\n    /**\n     * \n     * @param {Promise<PhotographerPageModel>} photographerPageModel \n     */\n    constructor(photographerPageModel) {\n        this.photographerPageModelPromise = photographerPageModel;\n    }\n\n    render(id) {\n        this.idPhotographer = id;\n        this.mediaList = [];\n        this.activePhotographerTags = [];\n        this.selectedMedia = [];\n        this.mediaFactory = new MediaFactory();\n\n        this.photographerPageModelPromise.then((photographerPageModel) => {\n            this.determineCurrentPhotographer(photographerPageModel.getPhotographersList());\n            this.determineCurrentPhotographerMedia(photographerPageModel.getMediaList());\n            this.contactModal = new ContactModal(this.currentPhotographer);\n            this.lightboxMedia = new LightboxMedia(this.allMedia, this.currentPhotographer);\n            \n            this.contactModal.renderContactModal();\n            this.lightboxMedia.renderLightboxMedia();\n\n            this.renderHeader();\n            this.renderMain();\n            \n        })\n    }\n\n    /**\n     * save photographer in currentPhotographer if their id == photographer wanted \n     * @param {Array<PhotographerProfileModel} photographers \n     */\n    determineCurrentPhotographer(photographers) {\n        photographers.forEach(photographer => {\n            if (photographer.getId() == this.idPhotographer) {\n                this.currentPhotographer = photographer;\n            }\n        });\n    }\n\n    /**\n     * add medium to array if photographer id in media object = id in photographers object\n     * @param {Array<MediumModel>} media \n     */\n    determineCurrentPhotographerMedia(media) {\n        media.forEach(medium => {\n            if (medium.getPhotographerId() == this.idPhotographer) {\n                this.mediaList.push(medium);\n            }\n        });\n        this.selectedMedia = this.mediaList\n    }\n\n    renderHeader() {\n        const header = document.createElement('header');\n        header.className = 'header_photographer_page';\n        header.role = 'heading';\n        header.ariaLabel = 'Fisheye photographer page heading';\n        header.innerHTML = `\n        <a class=\"logo\" href=\"/\">\n        <img class=\"logo_img\" src=\"/static/logo.svg\" alt=\"Fisheye Home Page\" />\n        </a>\n        `;\n\n        body.insertBefore(header, main);\n    }\n\n    renderMain() {\n        this.renderBanner();\n        this.renderDropdownMenu();\n        this.renderSummary();\n        this.sortBy(this.SortEnum.POPULARITY);\n    }\n\n\n    //Banner\n    renderBanner() {\n        const banner = document.createElement('section');\n        banner.className = 'banner';\n        banner.innerHTML = `\n        <div class=\"banner__text_content\" aria-label=\"${this.currentPhotographer.getName()} info\" >\n            <h2 class=\"photographer_name\">${this.currentPhotographer.getName()}</h2>\n            <h3 class=\"photographer_location\">${this.currentPhotographer.getLocation()}</h3>\n            <p class=\"photographer_desc\">${this.currentPhotographer.getTagline()}</p>\n            <div class=\"tags tags_photographer_page\"></div>\n        </div>\n        <button class=\"button_contact button_banner\" aria-label=\"Contact Me\" aria-haspopup=\"dialog\" aria-controls=\"contact_modal\"> Contactez-moi </button>\n        <div class=\"photographer__picture\">\n            <img class=\"photographer_thumbnail__picture picture_profile\" src=\"/static/Photographers ID Photos/${this.currentPhotographer.getPortrait()}\" alt=\"\">\n        </div>`\n        \n        this.renderBannerTags(banner.querySelector(\".tags_photographer_page\"));\n        \n        this.openContactModal(banner);\n\n        main.appendChild(banner);\n    }\n\n    //contact modal opening\n    openContactModal(banner) {\n        const buttonContact = banner.querySelector(\".button_contact\");\n        \n        buttonContact.addEventListener('click', () => {\n            this.contactModal.showContactModal();\n        });\n        \n        buttonContact.addEventListener('keydown', (e) => {\n            if((e.code === 'Enter') || (e.code === 'Space')) {\n                this.contactModal.showContactModal();   \n            }\n        })\n    }\n\n    renderBannerTags(bannerTags) {\n        const tags = new Tags(this.currentPhotographer.getTags());\n        tags.appendTags(bannerTags, 'photographer_tags__item')\n        tags.addEventOnChange(bannerTags, (isChecked, tagId) => this.handleTagClick(isChecked, tagId));\n    }\n\n    handleTagClick(isChecked, tagId) {\n        const checkboxTag = document.getElementById(tagId);\n        if (isChecked) {\n            checkboxTag.setAttribute('aria-checked', 'true');\n            this.activePhotographerTags.push(tagId);\n            this.activePhotographerTags = [...new Set(this.activePhotographerTags)];\n        } else {\n            checkboxTag.setAttribute('aria-checked', 'false');\n            const currentIndex = this.activePhotographerTags.indexOf(tagId);\n            this.activePhotographerTags.splice(currentIndex, 1);\n        }\n        Utils.removeChildOf(\"#app\", \"medium_thumbnail\");\n        this.sortMedia()\n    }\n\n    //sort media when medium tag = active photographer tag\n    sortMedia() {\n        this.selectedMedia = [];\n        this.activePhotographerTags.forEach(activePhotographerTag => {\n            this.mediaList.forEach(medium => {\n                medium.getTags().forEach(tag => {\n                    if (tag == activePhotographerTag) {\n                        this.selectedMedia.push(medium)\n                    }\n                })\n            });\n        });\n\n        if (this.selectedMedia.length == 0) { //if there are no media selected => display all thumbnails\n            this.selectedMedia = this.mediaList\n        } else { //display selected media only \n            this.selectedMedia = [...new Set(this.selectedMedia)]; //remove duplicates\n        }\n\n        const selectedItem = document.querySelector('.dropdown__content__item.selected'); \n        this.handleDropdownItemClick(selectedItem) //double sort => sort according to dropdown filter\n    }\n\n\n    //dropdown\n    renderDropdownMenu() {\n        const dropdownMenu = this.createDropdownMenu();\n        main.appendChild(dropdownMenu);\n\n        const dropdown = document.querySelector('.dropdown');\n        const dropdrownTrigger = document.querySelector('.dropdown__trigger');\n        const dropdrownItems = document.querySelectorAll('.dropdown__content__item');\n        const secondDropdownItem = dropdrownItems[1];\n        const lastDropdownItem = dropdrownItems[2];\n\n        for (const dropdrownItem of dropdrownItems) {\n            dropdrownItem.addEventListener('click', () => {\n                this.dropdownEvent(dropdrownItem, dropdown);\n            })\n            dropdrownItem.addEventListener('keydown', (e) => {\n                if( e.code === 'Enter') {\n                    this.dropdownEvent(dropdrownItem, dropdown);\n                }\n            })\n        }\n\n        //handle dropdown opening and closing with keayboard nav\n        dropdrownTrigger.addEventListener('click', () => {\n            if(dropdown.classList.contains('open')) {\n                this.closeDropdown();\n            } else {\n                this.openDropdown();\n            }\n        })\n\n        dropdrownTrigger.addEventListener('keydown', (e) => {\n            if((dropdown.classList.contains('open')) && (e.code === 'Enter')) {\n                this.closeDropdown();\n            } else if (e.code === 'Enter') {\n                this.openDropdown();\n            }\n        })\n\n        secondDropdownItem.addEventListener('keydown', (e) => {\n            if(e.code === 'Tab' && e.shiftKey) {\n                this.closeDropdown()\n            }\n        })\n\n        lastDropdownItem.addEventListener('keydown', (e) => {\n            if(e.code === 'Tab' && !e.shiftKey) {\n                this.closeDropdown()\n            }\n        })\n    }\n    \n    createDropdownMenu() {\n        const dropdownMenu = document.createElement('div');\n        dropdownMenu.className = \"dropdown_wrapper\";\n        dropdownMenu.innerHTML = `\n        <span class=\"sort_by\">Trier par</span>\n        <div class=\"dropdown\">\n            <a class=\"dropdown__trigger\" role=\"button\" aria-label=\"sort by\" aria-controls=\"dropdown_content\" aria-haspopup=\"listbox\" aria-expanded=\"false\" tabindex=\"0\">\n                <span>${this.SortEnum.POPULARITY}</span>\n                <i class=\"expand fas fa-chevron-down\"></i>\n            </a>\n        \n            <div class=\"dropdown__content\" role=\"listbox\">\n                <a class=\"dropdown__content__item selected\" role=\"option\" aria-label=\"sort by popularity\" aria-selected=\"true\" tabindex=\"0\">${this.SortEnum.POPULARITY}</a>\n                <a class=\"dropdown__content__item\" role=\"option\" aria-label=\"sort by date\" aria-selected=\"false\" tabindex=\"0\">${this.SortEnum.DATE}</a>\n                <a class=\"dropdown__content__item\" role=\"option\" aria-label=\"sort by title\" aria-selected=\"false\" tabindex=\"0\">${this.SortEnum.TITLE}</a>\n            </div>\n        </div>`\n        return dropdownMenu;\n    }\n\n    dropdownEvent(dropdrownItem, dropdown) {\n        if (!dropdrownItem.classList.contains('selected')) {\n            const selectedItem = dropdown.querySelector('.dropdown__content__item.selected');\n\n            selectedItem.classList.remove('selected');\n            dropdrownItem.classList.add('selected');\n            dropdrownItem.setAttribute('aria-selected', 'true');\n            dropdown.querySelector('.dropdown__trigger span').innerHTML = dropdrownItem.innerHTML;\n\n            this.closeDropdown();\n            this.handleDropdownItemClick(dropdrownItem);\n        }\n    }\n\n    handleDropdownItemClick(item) {\n        Utils.removeChildOf(\"#app\", \"medium_thumbnail\");\n        this.sortBy(item.innerHTML);\n    }\n\n    openDropdown() {\n        const dropdown = document.querySelector('.dropdown');\n        const dropdrownTrigger = document.querySelector('.dropdown__trigger');\n        dropdown.classList.add('open');\n        dropdrownTrigger.setAttribute('aria-expanded', 'true');\n    }   \n\n    closeDropdown() {\n        const dropdown = document.querySelector('.dropdown');\n        const dropdrownTrigger = document.querySelector('.dropdown__trigger');\n        dropdown.classList.remove('open');\n        dropdrownTrigger.setAttribute('aria-expanded', 'false');\n    }\n\n    sortBy(sortType) {\n        let sortedMedia = null;\n\n        switch (sortType) {\n            case this.SortEnum.DATE:\n                sortedMedia = this.selectedMedia.sort((a, b) => new Date(b.getDate()) - new Date(a.getDate()));\n                break;\n            case this.SortEnum.POPULARITY:\n                sortedMedia = this.selectedMedia.sort((a, b) => b.getLikes() - a.getLikes());\n                break;\n            case this.SortEnum.TITLE:\n                sortedMedia = this.selectedMedia.sort((a, b) => a.getTitle().localeCompare(b.getTitle(), 'fr'));\n                break;\n        }\n        sortedMedia.forEach(sortedMedium => {\n            this.createMediumThumbnail(sortedMedium)\n        })\n    }\n\n    \n\n    //sticker photographer total number of likes and price\n    renderSummary() {\n        let numberOfLikes = 0;\n        this.mediaList.forEach(medium => {\n            numberOfLikes = numberOfLikes + medium.getLikes()\n        });\n\n        const stickerSummary = document.createElement('div');\n        stickerSummary.className = 'sticker_summary';\n        stickerSummary.innerHTML = `\n        <div class=\"total_likes\">\n            <p class=\"total_number_of_likes\">${numberOfLikes}</p>\n            <i class=\"fas fa-heart fa-lg\" aria-label=\"likes\" aria-hidden=\"true\"></i>\n        </div>\n        <div class=\"photographer_price\">${this.currentPhotographer.getPrice()}€/jour</div>\n        `\n        main.appendChild(stickerSummary);\n\n    }\n\n    handleLikeButton(mediumThumbnail) {\n        const likeButton = mediumThumbnail.querySelector('.checkbox__input');\n        const mediumLikes = mediumThumbnail.querySelector('.medium_number_of_likes');\n        const totalLikes = document.querySelector('.total_number_of_likes');\n\n        likeButton.addEventListener('change', () => {\n            if (likeButton.checked) {\n                mediumLikes.innerHTML = parseInt(mediumLikes.innerHTML) + 1;\n                totalLikes.innerHTML = parseInt(totalLikes.innerHTML) + 1;\n            } else {\n                mediumLikes.innerHTML = parseInt(mediumLikes.innerHTML) - 1;\n                totalLikes.innerHTML = parseInt(totalLikes.innerHTML) - 1;\n            }\n        });\n    }\n\n    /**\n     * \n     * @param {MediumModel} medium \n     */\n    createMediumThumbnail(medium) {\n        const mediumThumbnail = this.mediaFactory.renderMedium(medium, this.currentPhotographer);\n        main.appendChild(mediumThumbnail);\n\n        const mediumThumbnailMiniature = mediumThumbnail.querySelector('.medium_thumbnail__miniature');\n        mediumThumbnailMiniature.addEventListener('click', (e) => {\n            this.displayMediumInLightbox(e, medium);\n        })\n\n        mediumThumbnailMiniature.addEventListener('keydown', (e) => {\n            if(e.code === 'Enter') {\n                this.displayMediumInLightbox(e, medium);\n            }\n        })\n\n        this.handleLikeButton(mediumThumbnail);\n    }    \n\n\n    displayMediumInLightbox(e, medium) {\n        e.preventDefault();\n        if (this.selectedMedia.length == 0) {\n            this.lightboxMedia.showLightboxMedia(medium, this.currentPhotographer, this.mediaList);\n        } else {\n            this.lightboxMedia.showLightboxMedia(medium, this.currentPhotographer, this.selectedMedia);\n        }\n    }\n}","import { HomePageBuilder } from \"./HomePageBuilder\";\nimport { PhotographerPageBuilder } from \"./PhotographerPageBuilder\";\n\n\nexport const PageFactoryEnum = {\n    HOME: \"home\",\n    PHOTOGRAPHER : \"photographer\",\n}\n//Map[key] = value\nlet registeredPages = new Map([\n    [PageFactoryEnum.PHOTOGRAPHER, PhotographerPageBuilder],\n    [PageFactoryEnum.HOME, HomePageBuilder]\n])\n\nexport class PageFactory {\n    getPage(type, pageModel) {\n        return new (registeredPages.get(type))(pageModel);\n    }\n}\n\n","import { HomePageModel } from \"../models/HomePageModel\";\nimport { PhotographerPageModel } from \"./PhotographerPageModel\";\n\n\nexport class AppModel {\n\n    /**\n   * @param {HomePageModel} homePage\n    * @param {PhotographerPageModel} photographerPageModel\n    */\n    constructor(homePage, photographerPageModel) {\n        this.homePageModel = homePage;\n        this.photographerPageModel = photographerPageModel;\n    }\n\n    getHomePage() {\n        return this.homePageModel\n    }\n\n    getMediaPageModel() {\n        return this.photographerPageModel\n    }\n}","export class PhotographersUtils {\n\n    static getAllTags(json) {\n        let photographers = json.photographers;\n        const allTags = photographers.map(photographer => photographer.tags).flat();\n        const tagsList = [...new Set(allTags)];\n        return tagsList;\n    }\n}","import { AppModel } from \"../models/AppModel\";\nimport { HomePageModel } from \"../models/HomePageModel\";\nimport { MediumModel as MediumModel } from \"../models/MediumModel\";\nimport { PhotographerPageModel } from \"../models/PhotographerPageModel\";\nimport { PhotographerProfileModel } from \"../models/PhotographerProfileModel\";\nimport { PhotographersUtils } from \"./PhotographersUtils\";\n\nexport class DataFetcher {\n    constructor(dataSource) {\n        this.dataSource = dataSource; //json file\n    }\n\n    fetchSource() {\n        const result = fetch(this.dataSource) // ressource request\n        .then(resp => resp.json())\n        .then(json => this.appPageWrapper(json))\n        return result;\n    }\n\n\n    appPageWrapper(json) {\n        const tagsList = PhotographersUtils.getAllTags(json); \n        const photographersList = json.photographers.map(photographer => new PhotographerProfileModel(photographer));\n        const homePageModel = new HomePageModel(photographersList, tagsList);\n        const mediaList = this.createMediaList(json);\n        const mediaPageModel = new PhotographerPageModel(photographersList, mediaList);\n        \n        return new AppModel(homePageModel, mediaPageModel)\n    }\n\n\n    createMediaList(json){\n        const mediaList = json.media.map(medium => new MediumModel(medium)) //map array<JSON medium> => array<mediumModel>\n        return mediaList;\n      \n    }\n\n\n\n}\n\n\n","import { PageFactory, PageFactoryEnum } from './scripts/factory/PageFactory';\nimport { AppModel } from './scripts/models/AppModel';\nimport { DataFetcher } from './scripts/utils/DataFetcher';\n\nconst dataFetcher = new DataFetcher('/static/FishEyeData-new.json');\nconst json = dataFetcher.fetchSource()\nconst pageFactory = new PageFactory();\n\n//possible routes\nconst routes = [\n    {\n        regex: /\\/{1}$/gm,\n        component: pageFactory.getPage(PageFactoryEnum.HOME, json.then(appModel => appModel.homePageModel))\n    },\n    {\n        regex: /\\/[A-Za-z-]{1,}\\/[0-9]{0,3}?$/,\n        component: pageFactory.getPage(PageFactoryEnum.PHOTOGRAPHER, json.then(appModel => appModel.photographerPageModel))\n    },\n];\n\nexport const router = () => {\n    const idPhotographer = location.pathname.split('/')[2];\n    routes.find(route => route.regex.test(location.pathname)).component.render(idPhotographer)\n};","import { router } from './Router';\n\nwindow.addEventListener('hashchange', router); // identifier of the URL changes\nwindow.addEventListener('load', router); // ressource has loaded"]}