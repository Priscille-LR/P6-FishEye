{"version":3,"sources":["scripts/factory/MediaFactory.js","scripts/factory/ContactModal.js","scripts/factory/LightboxMedia.js","scripts/factory/PhotographerPageBuilder.js","scripts/factory/HomePageBuilder.js","scripts/factory/PageFactory.js","scripts/utils/DataFetcher.js","Router.js","index.js","../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["MediaFactory","PICTURE","VIDEO","tmpMedium","extension","split","pop","test","mediaEnum","medium","getMediumFile","mediumTitle","toLowerCase","mediumTitleArray","shift","join","charAt","toUpperCase","slice","currentPhotographer","extractMediumTitle","mediumThumbnail","createMediumDisplay","appendThumbnailContent","mediumThumbnailContent","document","createElement","className","innerHTML","price","likes","appendChild","controls","mediumType","getMediumType","media","String","image","src","name","video","source","type","autoplay","alt","ContactModal","createContactModal","createContactModalBody","contactModal","querySelector","modalBody","appendModalTitle","appendCloseButton","appendContactForm","createModalButton","modalTitle","closeButton","addEventListener","hideContactModal","contactForm","setAttribute","createFormFields","addEventListenerValidate","inputs","querySelectorAll","forEach","input","validateFieldsFormat","hideErrorMessage","parentElement","id","showErrorMessage","formData","forParam","textParam","label","inputField","textAreaInput","createFormData","createLabel","createInputField","createTextArea","modalButton","e","preventDefault","validateFields","console","log","value","style","display","field","message","removeAttribute","fieldFormat","emailAddressFormat","messageFormat","length","outcome","LightboxMedia","allMedia","mediaFactory","createLightboxMedia","createLightboxMediaBody","lightboxMedia","lightboxBody","appendPreviousButton","appendMediumBox","appendMediumTitle","appendNextButton","hideLightboxMedia","previousButton","currentIndex","indexOf","newIndex","nextButton","showLightboxMedia","mediumBox","removeLightboxMedium","title","lightboxMedium","mainNode","index","childNodes","child","removeChild","PhotographerPageBuilder","props","DATE","POPULARITY","TITLE","jsonPromise","json","isDropdownVisible","photographerTags","selectedMedia","idPhotographer","then","jsonData","determineCurrentPhotographer","photographers","determineCurrentPhotographerMedia","renderHeader","renderMain","renderContactModal","renderLightboxMedia","header","createHeader","appendLogo","main","insertBefore","logo","photographer","photographerId","push","renderBanner","renderSummary","renderDropdown","sortBy","SortEnum","createBanner","renderBannerContent","createBannerButton","createBannerPicture","banner","bannerContent","createBannerContent","appendBannerName","appendBannerLocation","appendBannerDesc","appendBannerTags","appendBannerContentTags","bannerTitle","bannerLocation","city","country","bannerDesc","tagline","contactButton","launchContactModal","showContactModal","bannerPicture","portrait","bannerTags","tags","photographerTag","bannerTag","checkboxTag","labelTag","checked","Set","splice","handleTagClick","removeAllThumbnails","sortMedia","clickedPhotographerTag","tag","createMediumThumbnail","selectedMedium","dropdownMenu","createDropdownMenu","appendSortByText","appendDropdown","dropdrownButton","dropdrownContent","dropdownItems","getElementsByClassName","item","handleDropdownItemClick","dropdown","appendDropdownButton","createDropdownContent","dropdownButton","dropdownContent","appendDropdownItemDATE","appendDropdownItemTITLE","dropdownItemDATE","dropdownItemTITLE","summary","createSummary","createTotalLikes","createPhotographerPrice","stickerSummary","photographerPrice","numberOfLikes","totalNumberOfLikes","likeButton","mediumLikes","totalLikes","parseInt","renderMedium","mediumThumbnailMiniature","incrementNumberOfLikes","click","swapDropdownItems","temporary","sortType","sortedMedia","sort","a","b","Date","date","compareTitle","sortedMedium","t1","t2","localeCompare","HomePageBuilder","dataPromise","clickedNavTags","appendMainNav","mainNav","appendNavTags","nav","allTags","map","flat","distinctTags","tagName","substring","headerTag","sortPhotographers","photographersNode","selectedPhotographers","clickedNavTag","includes","createArticle","createMainTitle","article","appendPhotographerThumbnailPicture","appendPhotographerThumbnailContent","thumbnailPicture","thumbnailContent","PagesFactoryEnum","HOME","PHOTOGRAPHER","registeredPages","PageFactory","DataFetcher","dataSource","fetch","resp","dataFetcher","fetchSource","pageFactory","routes","regex","component","getPage","router","location","pathname","find","route","render","window","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","event","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","stack","overlay","createErrorOverlay","body","getElementById","remove","stackTrace","innerText","getParents","modules","parents","k","d","dep","Array","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"P6-Fisheye.e31bb0bc.js","sourceRoot":"..","sourcesContent":["export class MediaFactory {\n    constructor() {\n    }\n\n    mediaEnum = {\n        PICTURE: \"picture\",\n        VIDEO: \"video\",\n    }\n\n    getMediumType(tmpMedium) {\n        let extension = tmpMedium.split('.').pop();\n        if (/(jpg)$/ig.test(extension)) {\n            return this.mediaEnum.PICTURE;\n        }\n        if (/(mp4)$/ig.test(extension)) {\n            return this.mediaEnum.VIDEO;\n        }\n    }\n\n    extractMediumTitle(medium) {\n        let tmpMedium = this.getMediumFile(medium)\n        let mediumTitle = tmpMedium.toLowerCase();\n        let mediumTitleArray = mediumTitle.split(\".\");\n        mediumTitle = mediumTitleArray[0];\n        mediumTitleArray = mediumTitle.split(\"_\");\n        mediumTitle = mediumTitleArray.shift(); //remove 1st element in array \n        mediumTitle = mediumTitleArray.join(\" \"); //add elements of array into a string\n        mediumTitle = mediumTitle.charAt(0).toUpperCase() + mediumTitle.slice(1);\n        return mediumTitle;\n    }\n\n\n    renderMedium(medium, currentPhotographer) {\n\n        let mediumTitle = this.extractMediumTitle(medium);\n\n        let mediumThumbnail = this.createMediumDisplay(medium, currentPhotographer, mediumTitle, \"medium_thumbnail\");\n              \n        this.appendThumbnailContent(mediumTitle, medium, mediumThumbnail);\n\n        return mediumThumbnail;\n    }\n\n    appendThumbnailContent(mediumTitle, medium, mediumThumbnail) {\n        let mediumThumbnailContent = document.createElement('div');\n        mediumThumbnailContent.className = \"medium_thumbnail__content\";\n        mediumThumbnailContent.innerHTML = `\n            <h2 class=\"medium_title\">${mediumTitle}</h2>\n            <div class=\"price_and_likes\">\n              <span class=\"medium_price\">${medium.price}€</span>\n              <span class=\"medium_number_of_likes\">${medium.likes}</span>\n              <label class=\"checkbox__like\"> \n                <input type=\"checkbox\" class=\"checkbox__input\" name=\"like\">\n                    <i class=\"far fa-heart like__unchecked\"></i>\n                    <i class=\"fas fa-heart like__checked\"></i>\n                </input>   \n                </label>\n            </div>\n          </div>`;\n\n        mediumThumbnail.appendChild(mediumThumbnailContent);\n    }\n\n    createMediumDisplay(medium, currentPhotographer, mediumTitle, className, controls = false) {\n        let mediumThumbnail = document.createElement('div');\n        mediumThumbnail.className = className;\n        \n        const mediumType = this.getMediumType(this.getMediumFile(medium));\n\n        var media;\n        switch (mediumType) {\n            case this.mediaEnum.PICTURE: {\n                let tmpMedium = String(medium.image);\n                media = document.createElement('img');\n                media.src = `/static/${currentPhotographer.name.split(' ')[0]}/${tmpMedium}`;\n                break;\n            }\n            case this.mediaEnum.VIDEO: {\n                let tmpMedium = String(medium.video);\n                media = document.createElement('video');\n                let source = document.createElement('source');\n                source.src = `/static/${currentPhotographer.name.split(' ')[0]}/${tmpMedium}`\n                source.type = \"video/mp4\"\n                media.controls = controls;\n                if(controls){\n                    media.autoplay = true\n                }\n                media.appendChild(source);\n                break;\n            }\n            default: tmpMedium = String(\"\");\n\n        }\n        media.className = `${className}__miniature`;\n        media.alt = mediumTitle;\n        mediumThumbnail.appendChild(media);\n        return mediumThumbnail;\n    }\n\n    getMediumFile(medium) {\n        let tmpMedium = medium.image;\n        if (tmpMedium == null) {\n            tmpMedium = medium.video;\n        }\n        return tmpMedium;\n    }\n}\n\n\n","export class ContactModal {\n    constructor(currentPhotographer) {\n        this.currentPhotographer = currentPhotographer;\n    }\n\n    //modal creation \n    renderContactModal() {\n        this.createContactModal();\n        this.createContactModalBody();\n\n        this.contactModal = document.querySelector('.contact_modal');\n    }\n\n    createContactModal() {\n        const contactModal = document.createElement('div');\n        contactModal.className = 'contact_modal';\n\n        document.querySelector('main').appendChild(contactModal);\n    }\n\n    createContactModalBody() {\n        const modalBody = document.createElement('div');\n        modalBody.className = 'contact_modal__body';\n\n        this.appendModalTitle(modalBody);\n        this.appendCloseButton(modalBody);\n        this.appendContactForm(modalBody);\n        this.createModalButton(modalBody);\n\n        document.querySelector('.contact_modal').appendChild(modalBody);\n    }\n\n    appendModalTitle(modalBody) {\n        const modalTitle = document.createElement('h2');\n        modalTitle.className = 'contact_modal__body__title';\n        modalTitle.innerHTML = `Contactez-moi </br> ${this.currentPhotographer.name}`;\n\n        modalBody.appendChild(modalTitle);\n\n    }\n\n    appendCloseButton(modalBody) {\n        const closeButton = document.createElement('button');\n        closeButton.className = 'close_button';\n        closeButton.innerHTML = `<i class=\"fas fa-times fa-3x\"></i>`;\n        closeButton.addEventListener('click', () => {\n            this.hideContactModal();\n        });\n        modalBody.appendChild(closeButton);\n\n    }\n\n    appendContactForm(modalBody) {\n        const contactForm = document.createElement('form');\n        contactForm.className = 'contact_form';\n        contactForm.setAttribute = (\"method\", \"post\");\n        contactForm.setAttribute = (\"action\", \"submit\");\n\n        this.createFormFields(contactForm);\n        this.addEventListenerValidate(contactForm);\n\n        modalBody.appendChild(contactForm);\n    }\n\n    addEventListenerValidate(contactForm) {\n        const inputs = contactForm.querySelectorAll('.input_field');\n\n        inputs.forEach(input => {\n            input.addEventListener('blur', () => {\n                if (this.validateFieldsFormat(input) === true) {\n                    this.hideErrorMessage(input.parentElement);\n                } else {\n                    if (input.id === \"email\") {\n                        this.showErrorMessage(input.parentElement, 'Veuillez entrer une adresse mail valide')\n                    } else if (input.id === \"message\") {\n                        this.showErrorMessage(input.parentElement, \"Dites-m'en un peu plus...\")\n                    } else {\n                        this.showErrorMessage(input.parentElement, 'Veuillez entrer au moins 2 caractères')\n                    }\n                }\n            });\n        });\n    }\n\n    createFormData() {\n        const formData = document.createElement('div');\n        formData.className = 'formData';\n        return formData;\n    }\n\n    createLabel(forParam, textParam) {\n        const label = document.createElement('label');\n        label.setAttribute(\"for\", forParam);\n        label.innerHTML = `${textParam}`;\n        return label;\n    }\n\n    createInputField(id) {\n        const inputField = document.createElement('input');\n        inputField.className = 'input_field';\n        inputField.type = \"text\";\n        inputField.setAttribute(\"id\", id);\n        return inputField;\n    }\n\n    createTextArea(id) {\n        const textAreaInput = document.createElement('textarea');\n        textAreaInput.className = 'input_field';\n        textAreaInput.setAttribute(\"id\", id);\n        textAreaInput.setAttribute(\"rows\", 5);\n        return textAreaInput;\n    }\n\n    createFormFields(contactForm) {\n\n        //Firstname\n        let formData = this.createFormData();\n        formData.appendChild(this.createLabel(\"firstname\", \"Prénom\"));\n        formData.appendChild(this.createInputField(\"firstname\"));\n        contactForm.appendChild(formData);\n\n        //Lastname\n        formData = this.createFormData();\n        formData.appendChild(this.createLabel(\"lastname\", \"Nom\"));\n        formData.appendChild(this.createInputField(\"lastname\"));\n        contactForm.appendChild(formData);\n\n        //Email\n        formData = this.createFormData();\n        formData.appendChild(this.createLabel(\"email\", \"Email\"));\n        formData.appendChild(this.createInputField(\"email\"));\n        contactForm.appendChild(formData);\n\n        //Message\n        formData = this.createFormData();\n        formData.appendChild(this.createLabel(\"message\", \"Votre message\"));\n        formData.appendChild(this.createTextArea(\"message\"));\n        contactForm.appendChild(formData);\n    }\n\n    createModalButton(modalBody) {\n        const modalButton = document.createElement('button');\n        modalButton.className = 'button_contact submit_button';\n        modalButton.type = \"submit\";\n        modalButton.innerHTML = `Envoyer`;\n\n        modalButton.addEventListener('click', (e) => {\n            const inputs = modalBody.querySelectorAll('.input_field');\n            e.preventDefault();\n            if (this.validateFields(modalBody) === true) {\n                inputs.forEach(input => {\n                    console.log(input.value);\n                });\n                this.hideContactModal();\n            } else {\n                console.log(\"veuillez rensigner les champs, merci !\")\n            }\n        });\n        modalBody.appendChild(modalButton);\n    }\n\n    showContactModal() {\n        this.contactModal.style.display = \"block\";\n    }\n\n    hideContactModal() {\n        this.contactModal.style.display = \"none\";\n    }\n\n\n    //fields validation \n\n    //error message is displayed when field is invalid\t\n    showErrorMessage(field, message) {\n        field.setAttribute('data-error', message);\n        field.setAttribute('data-error-visible', 'true');\n    }\n\n    //error message is hidden \n    hideErrorMessage(field) {\n        field.removeAttribute('data-error');\n        field.removeAttribute('data-error-visible');\n    }\n\n    validateFieldsFormat(input) {\n        const fieldFormat = /^[A-Za-z\\-\\sàáâãäåçèéêëìíîïðòóôõöùúûüýÿ']{2,}$/;\n        const emailAddressFormat = /\\S+@\\S+\\.\\S+/;\n        const messageFormat = /^[A-Za-z\\-\\sàáâãäåçèéêëìíîïðòóôõöùúûüýÿ'.,;!?]{5,200}$/;\n\n        if (input.id === \"email\") {\n            if ((input.value.length != 0) && (emailAddressFormat.test(input.value))) {\n                return true;\n            } else {\n                return false;\n            }\n        }\n        if (input.id === \"message\") {\n            if ((input.value.length != 0) && (messageFormat.test(input.value))) {\n                return true;\n            } else {\n                return false;\n            }\n        \n        } else {\n            if ((input.value.length != 0) && (fieldFormat.test(input.value))) {\n                return true;\n            } else {\n                return false;\n            }\n        }\n    }\n\n    validateFields(modalBody) {\n        const inputs = modalBody.querySelectorAll('.input_field');\n        let outcome = true\n        inputs.forEach(input => {\n            if (this.validateFieldsFormat(input) === false) {\n                outcome = false\n            }\n        });\n        return outcome;\n    }\n}","import { MediaFactory } from './MediaFactory';\n\nexport class LightboxMedia {\n    constructor(allMedia = [], currentPhotographer) {\n        this.allMedia = allMedia;\n        this.currentPhotographer = currentPhotographer;\n\n        this.mediaFactory = new MediaFactory();\n    }\n\n    renderLightboxMedia() {\n        this.createLightboxMedia();\n        this.createLightboxMediaBody();\n\n        this.lightboxMedia = document.querySelector('.lightbox_media');\n    }\n\n    createLightboxMedia() {\n        const lightboxMedia = document.createElement('div');\n        lightboxMedia.className = 'lightbox_media';\n\n        document.querySelector('main').appendChild(lightboxMedia);\n    }\n\n    createLightboxMediaBody() {\n        const lightboxBody = document.createElement('div');\n        lightboxBody.className = 'lightbox_media__body';\n\n        this.appendCloseButton(lightboxBody);\n        this.appendPreviousButton(lightboxBody);\n        this.appendMediumBox(lightboxBody);\n        this.appendMediumTitle(lightboxBody);\n        this.appendNextButton(lightboxBody);\n\n        document.querySelector('.lightbox_media').appendChild(lightboxBody);\n    }\n\n    appendCloseButton(lightboxBody) {\n        const closeButton = document.createElement('button');\n        closeButton.className = 'close_button_lightbox';\n        closeButton.innerHTML = `<i class=\"fas fa-times fa-3x\"></i>`;\n        closeButton.addEventListener('click', () => {\n            this.hideLightboxMedia();\n        });\n        lightboxBody.appendChild(closeButton);\n    }\n\n    appendPreviousButton(lightboxBody) {\n        const previousButton = document.createElement('button');\n        previousButton.className = 'previous_button';\n        previousButton.innerHTML = `<i class=\"fas fa-chevron-left fa-3x\"></i>`;\n        previousButton.addEventListener('click', () => {\n\n            const currentIndex = this.allMedia.indexOf(this.medium);\n            const newIndex = currentIndex - 1;\n\n            const nextButton = lightboxBody.querySelector('.next_button');\n            nextButton.style.display = \"block\";\n            \n            if (newIndex >= 0 ) {\n                this.showLightboxMedia(this.allMedia[newIndex], this.currentPhotographer, this.allMedia);\n            } \n\n            if (newIndex == 0) {\n                previousButton.style.display = \"none\"; //disable prev button\n            }\n        });\n\n        lightboxBody.appendChild(previousButton);\n    }\n    \n    appendMediumBox(lightboxBody) {\n        const mediumBox = document.createElement('div');\n        mediumBox.className = \"medium_box\";\n        lightboxBody.appendChild(mediumBox);\n    }\n\n    appendMediumTitle(lightboxBody) {\n        const mediumTitle = document.createElement('h2');\n        mediumTitle.className = 'lightbox_title';\n        lightboxBody.appendChild(mediumTitle);\n    }\n\n    appendNextButton(lightboxBody) {\n        const nextButton = document.createElement('button');\n        nextButton.className = 'next_button';\n        nextButton.innerHTML = `<i class=\"fas fa-chevron-right fa-3x\"></i>`;\n        nextButton.addEventListener('click', () => {\n            const currentIndex = this.allMedia.indexOf(this.medium);\n            const newIndex = currentIndex + 1;\n\n            const previousButton = lightboxBody.querySelector('.previous_button');\n            previousButton.style.display = \"block\";\n\n            if (newIndex <= this.allMedia.length -1) {\n                this.showLightboxMedia(this.allMedia[newIndex], this.currentPhotographer, this.allMedia);\n            }\n\n            if (newIndex == this.allMedia.length -1) {\n                nextButton.style.display = \"none\";\n            }\n        });\n\n        lightboxBody.appendChild(nextButton);\n    }\n\n    showLightboxMedia(medium, currentPhotographer, allMedia) {\n        this.allMedia = allMedia;\n        this.medium = medium;\n        this.removeLightboxMedium();\n\n        const title =this.mediaFactory.extractMediumTitle(medium);\n\n        const lightboxMedium = this.mediaFactory.createMediumDisplay(medium, currentPhotographer, title, \"lightbox_medium\", true);\n        document.querySelector('.medium_box').appendChild(lightboxMedium);\n        this.lightboxMedia.style.display = \"block\";\n\n        const mediumTitle = document.querySelector('.lightbox_title');\n        mediumTitle.innerHTML = title;\n    }\n\n    hideLightboxMedia() {\n        this.lightboxMedia.style.display = \"none\";\n    }\n\n    removeLightboxMedium() {\n        const mainNode = document.querySelector('.medium_box')\n        for (let index = mainNode.childNodes.length - 1; index >= 0; index--) {\n            const child = mainNode.childNodes[index];\n            mainNode.removeChild(child)\n        }\n    }\n}\n","import { MediaFactory } from './MediaFactory';\nimport { ContactModal } from \"./ContactModal\";\nimport { LightboxMedia } from \"./LightboxMedia\";\n\nexport class PhotographerPageBuilder {\n\n    SortEnum = {\n        DATE: \"Date\",\n        POPULARITY: \"Popularité\",\n        TITLE: \"Titre\",\n    }\n\n    constructor(props) {\n        this.jsonPromise = props.json\n        this.isDropdownVisible = false //dropdown menu hidden by default\n        this.allMedia = [];\n        this.photographerTags = [];\n        this.selectedMedia = [];\n        this.mediaFactory = new MediaFactory();\n    }\n\n    render(id) {\n        this.idPhotographer = id\n        this.jsonPromise.then((jsonData) => {\n            this.determineCurrentPhotographer(jsonData.photographers);\n            this.determineCurrentPhotographerMedia(jsonData.media);\n\n            this.renderHeader();\n            this.renderMain();\n\n            this.contactModal = new ContactModal(this.currentPhotographer);\n            this.contactModal.renderContactModal();\n\n            this.lightboxMedia = new LightboxMedia(this.allMedia, this.currentPhotographer);\n            this.lightboxMedia.renderLightboxMedia();\n        })\n    }\n\n    renderHeader() {\n        const header = this.createHeader();\n        this.appendLogo(header);\n\n        const main = document.querySelector(\"main\");\n        document.querySelector('body').insertBefore(header, main);\n    }\n\n    createHeader() {\n        const header = document.createElement('header');\n        header.className = 'header_photographer_page';\n        return header;\n    }\n\n    appendLogo(header) {\n        const logo = document.createElement('a');\n        logo.className = 'logo';\n        logo.setAttribute(\"href\", \"/\");\n        logo.innerHTML = `<img class=\"logo_img\" src=\"/static/logo.svg\" alt=\"logo\" />`;\n\n        header.appendChild(logo);\n    }\n\n    // for each photographer, \n    //  if their id == photographer wanted \n    //  then save photographer in currentPhotographer \n    determineCurrentPhotographer(photographers) {\n        photographers.forEach(photographer => {\n            if (photographer.id == this.idPhotographer) {\n                this.currentPhotographer = photographer;\n            }\n        });\n    }\n\n    //for each medium, \n    //  if photographer id in media object = id in photographers object,\n    //  then add medium to array\n    determineCurrentPhotographerMedia(media) {\n        media.forEach(medium => {\n            if (medium.photographerId == this.idPhotographer) {\n                this.allMedia.push(medium);\n            }\n        });\n    }\n\n    renderMain() {\n        this.renderBanner();\n        this.renderSummary();\n        this.renderDropdown();\n        this.sortBy(this.SortEnum.POPULARITY);\n    }\n\n\n    //Banner\n\n    renderBanner() {\n        this.createBanner();\n        this.renderBannerContent();\n        this.createBannerButton();\n        this.createBannerPicture();\n    }\n\n    createBanner() {\n        const banner = document.createElement('div');\n        banner.className = 'banner';\n        document.querySelector('main').appendChild(banner);\n    }\n\n    renderBannerContent() {\n        const bannerContent = this.createBannerContent();\n        this.appendBannerName(bannerContent);\n        this.appendBannerLocation(bannerContent);\n        this.appendBannerDesc(bannerContent);\n        this.appendBannerTags(bannerContent);\n        this.appendBannerContentTags(bannerContent);\n    }\n\n    createBannerContent() {\n        const bannerContent = document.createElement('div');\n        bannerContent.className = 'banner__text_content';\n        document.querySelector('.banner').appendChild(bannerContent);\n        return bannerContent;\n\n    }\n\n    appendBannerName(bannerContent) {\n        const bannerTitle = document.createElement('h2');\n        bannerTitle.className = 'photographer_name';\n        bannerTitle.innerHTML = this.currentPhotographer.name;\n        bannerContent.appendChild(bannerTitle);\n    }\n\n    appendBannerLocation(bannerContent) {\n        const bannerLocation = document.createElement('h3');\n        bannerLocation.className = 'photographer_location';\n        bannerLocation.innerHTML = `${this.currentPhotographer.city}, ${this.currentPhotographer.country}`;\n        bannerContent.appendChild(bannerLocation);\n    }\n\n    appendBannerDesc(bannerContent) {\n        const bannerDesc = document.createElement('p');\n        bannerDesc.className = 'photographer_desc';\n        bannerDesc.innerHTML = this.currentPhotographer.tagline;\n        bannerContent.appendChild(bannerDesc);\n    }\n\n    createBannerButton() {\n        const contactButton = document.createElement('button');\n        contactButton.className = 'button_contact button_banner';\n        contactButton.innerHTML = `Contactez-moi`;\n        contactButton.addEventListener('click', () => {\n            this.launchContactModal()\n        });\n        document.querySelector('.banner').appendChild(contactButton);\n    }\n\n    launchContactModal() {\n        this.contactModal.showContactModal();\n    }\n\n    createBannerPicture() {\n        const bannerPicture = document.createElement('div');\n        bannerPicture.className = 'photographer__picture';\n        bannerPicture.innerHTML = `\n            <img\n                class=\"photographer_thumbnail__picture picture_profile\"\n                src=\"/static/Photographers ID Photos/${this.currentPhotographer.portrait}\"\n                alt=\"photographer's thumbnail picture\"\n              />`;\n\n        document.querySelector('.banner').appendChild(bannerPicture);\n    }\n\n    appendBannerTags(bannerContent) {\n        const bannerTags = document.createElement('div');\n        bannerTags.className = 'tags tags_photographer_page';\n        bannerContent.appendChild(bannerTags);\n    }\n\n    appendBannerContentTags(bannerContent) {\n        this.currentPhotographer.tags.forEach(photographerTag => {\n            const bannerTag = document.createElement('div');\n            bannerTag.className = 'photographer_tags__item';\n\n            const checkboxTag = document.createElement('input');\n            checkboxTag.type = \"checkbox\";\n            checkboxTag.className = \"tag_checkbox\"\n            checkboxTag.id = photographerTag;\n            bannerTag.appendChild(checkboxTag)\n\n            const labelTag = document.createElement('label');\n            labelTag.className = \"tag_name\"\n            labelTag.setAttribute(\"for\", photographerTag);\n            labelTag.innerHTML = `#${photographerTag}`;\n            bannerTag.appendChild(labelTag)\n\n            bannerContent.querySelector('.tags_photographer_page').appendChild(bannerTag);\n\n            checkboxTag.addEventListener('change', () => {\n                if (checkboxTag.checked) {\n                    this.photographerTags.push(photographerTag);\n                    this.photographerTags = [...new Set(this.photographerTags)];\n                } else {\n                    const currentIndex = this.photographerTags.indexOf(photographerTag);\n                    this.photographerTags.splice(currentIndex, 1);\n                }\n                console.log(this.photographerTags)\n                this.handleTagClick();\n            });\n        });\n    }\n\n    handleTagClick() {\n        this.removeAllThumbnails();\n        this.sortMedia()\n    }\n\n    sortMedia() {\n       this.selectedMedia = [];\n        this.photographerTags.forEach(clickedPhotographerTag => {\n            this.allMedia.forEach(medium => {\n                medium.tags.forEach(tag => {\n                    if (tag == clickedPhotographerTag) {\n                        this.selectedMedia.push(medium)\n                    }\n                })\n            });\n        });\n\n        if (this.selectedMedia.length == 0) {\n            this.allMedia.forEach(medium => {\n                this.createMediumThumbnail(medium)\n\n            });\n        } else {\n            this.selectedMedia = [...new Set(this.selectedMedia)];\n\n            this.selectedMedia.forEach(selectedMedium => {\n                this.createMediumThumbnail(selectedMedium);\n            });\n        }\n\n    }\n\n\n    //dropdown\n\n    renderDropdown() {\n\n        const dropdownMenu = this.createDropdownMenu();\n        this.appendSortByText(dropdownMenu);\n        this.appendDropdown(dropdownMenu);\n        document.querySelector('main').appendChild(dropdownMenu);\n\n        const dropdrownButton = document.querySelector('.dropdown__button');\n        const dropdrownContent = document.querySelector('.dropdown__content');\n\n        dropdrownButton.addEventListener('click', () => {\n            if (this.isDropdownVisible == false) {\n                dropdrownContent.style.display = \"block\";\n                this.isDropdownVisible = true; //content visibility state \n            } else {\n                dropdrownContent.style.display = \"none\";\n                this.isDropdownVisible = false;\n            }\n        });\n\n        const dropdownItems = document.getElementsByClassName(\"dropdown__content__item\");\n        for (let item of dropdownItems) {\n            item.addEventListener('click', () => {\n                this.handleDropdownItemClick(dropdrownButton, item);\n            })\n        }\n    }\n\n    createDropdownMenu() {\n        const dropdownMenu = document.createElement('div');\n        dropdownMenu.className = \"dropdown_menu\";\n        return dropdownMenu;\n    }\n\n    appendSortByText(dropdownMenu) {\n        const sortBy = document.createElement('span');\n        sortBy.className = 'sort_by';\n        sortBy.innerHTML = `Trier par`;\n        dropdownMenu.appendChild(sortBy);\n    }\n\n    appendDropdown(dropdownMenu) {\n        const dropdown = document.createElement('div');\n        dropdown.className = \"dropdown\";\n        this.appendDropdownButton(dropdown);\n        this.createDropdownContent(dropdown);\n        dropdownMenu.appendChild(dropdown);\n    }\n\n    appendDropdownButton(dropdown) {\n        const dropdownButton = document.createElement('button');\n        dropdownButton.className = 'dropdown__button';\n        dropdownButton.innerHTML = this.SortEnum.POPULARITY;\n        dropdown.appendChild(dropdownButton);\n    }\n\n    createDropdownContent(dropdown) {\n        const dropdownContent = document.createElement('div');\n        dropdownContent.className = 'dropdown__content';\n\n        this.appendDropdownItemDATE(dropdownContent);\n        this.appendDropdownItemTITLE(dropdownContent);\n\n        dropdown.appendChild(dropdownContent);\n    }\n\n    appendDropdownItemDATE(dropdownContent) {\n        const dropdownItemDATE = document.createElement('a');\n        dropdownItemDATE.className = 'dropdown__content__item';\n        dropdownItemDATE.innerHTML = this.SortEnum.DATE;\n        dropdownContent.appendChild(dropdownItemDATE);\n    }\n\n    appendDropdownItemTITLE(dropdownContent) {\n        const dropdownItemTITLE = document.createElement('a');\n        dropdownItemTITLE.className = 'dropdown__content__item';\n        dropdownItemTITLE.innerHTML = this.SortEnum.TITLE;\n        dropdownContent.appendChild(dropdownItemTITLE);\n    }\n\n\n    //sticker photographer total number of likes and price\n\n    renderSummary() {\n        const summary = this.createSummary();\n        this.createTotalLikes(summary);\n        this.createPhotographerPrice(summary);\n\n    }\n\n    createSummary() {\n        const stickerSummary = document.createElement('div');\n        stickerSummary.className = 'sticker_summary';\n        document.querySelector('main').appendChild(stickerSummary);\n        return stickerSummary;\n    }\n\n    createPhotographerPrice(summary) {\n        const price = this.currentPhotographer.price;\n        const photographerPrice = document.createElement('div');\n        photographerPrice.className = \"photographer_price\";\n        photographerPrice.innerHTML = price + \"€/jour\";\n\n        summary.appendChild(photographerPrice);\n    }\n\n    createTotalLikes(summary) {\n        let numberOfLikes = 0;\n        this.allMedia.forEach(medium => {\n            numberOfLikes = numberOfLikes + medium.likes\n        });\n\n        const totalNumberOfLikes = document.createElement('div');\n        totalNumberOfLikes.className = \"total_likes\";\n\n        totalNumberOfLikes.innerHTML = `\n        <p class=\"total_number_of_likes\">` + numberOfLikes + `</p>\n        <i class=\"fas fa-heart fa-lg\"></i>`;\n\n        summary.appendChild(totalNumberOfLikes);\n    }\n\n    incrementNumberOfLikes(mediumThumbnail) {\n        const likeButton = mediumThumbnail.querySelector('.checkbox__input');\n        const mediumLikes = mediumThumbnail.querySelector('.medium_number_of_likes');\n        const totalLikes = document.querySelector('.total_number_of_likes');\n\n        likeButton.addEventListener('change', () => {\n            if (likeButton.checked) {\n                mediumLikes.innerHTML = parseInt(mediumLikes.innerHTML) + 1;\n                totalLikes.innerHTML = parseInt(totalLikes.innerHTML) + 1;\n            } else {\n                mediumLikes.innerHTML = parseInt(mediumLikes.innerHTML) - 1;\n                totalLikes.innerHTML = parseInt(totalLikes.innerHTML) - 1;\n            }\n\n        });\n    }\n\n    createMediumThumbnail(medium) {\n        const mediumThumbnail = this.mediaFactory.renderMedium(medium, this.currentPhotographer);\n\n        const main = document.querySelector('main');\n        main.appendChild(mediumThumbnail);\n\n        const mediumThumbnailMiniature = mediumThumbnail.querySelector('.medium_thumbnail__miniature');\n\n        mediumThumbnailMiniature.addEventListener('click', () => {\n            if (this.selectedMedia.length == 0) {\n                this.lightboxMedia.showLightboxMedia(medium, this.currentPhotographer, this.allMedia)\n            } else {\n                this.lightboxMedia.showLightboxMedia(medium, this.currentPhotographer, this.selectedMedia)\n            }\n        })\n\n        this.incrementNumberOfLikes(mediumThumbnail);\n    }\n\n    removeAllThumbnails() {\n        const mainNode = document.querySelector('main')\n        for (let index = mainNode.childNodes.length - 1; index >= 0; index--) {\n            const child = mainNode.childNodes[index];\n            if (child.className == \"medium_thumbnail\") {\n                mainNode.removeChild(child)\n            }\n        }\n    }\n\n\n    handleDropdownItemClick(dropdrownButton, item) {\n        dropdrownButton.click();\n\n        this.removeAllThumbnails(); //remove everything\n        this.sortBy(item.innerHTML); //sort\n        this.swapDropdownItems(item, dropdrownButton); //swap\n    }\n\n    swapDropdownItems(item, dropdrownButton) {\n        var temporary = item.innerHTML;\n        item.innerHTML = dropdrownButton.innerHTML;\n        dropdrownButton.innerHTML = temporary;\n    }\n\n    //a & b = media\n    sortBy(sortType) {\n        let sortedMedia = null;\n        switch (sortType) {\n            case this.SortEnum.DATE:\n                sortedMedia = this.allMedia.sort((a, b) => new Date(b.date) - new Date(a.date))\n                break;\n            case this.SortEnum.POPULARITY:\n                sortedMedia = this.allMedia.sort((a, b) => b.likes - a.likes);\n                \n                break;\n            case this.SortEnum.TITLE:\n                sortedMedia = this.allMedia.sort((a,b) => this.compareTitle(a,b));\n                break;\n        }\n        sortedMedia.forEach(sortedMedium => {\n            this.createMediumThumbnail(sortedMedium)\n        })\n    }\n\n    compareTitle(a,b){\n        const t1 = this.mediaFactory.extractMediumTitle(a)\n        const t2 = this.mediaFactory.extractMediumTitle(b)\n\n        return t1.localeCompare(t2, 'fr')\n    }\n}","export class HomePageBuilder {\n    constructor(props) {\n        this.dataPromise = props.json\n        this.clickedNavTags = [];\n    }\n\n    //display header and main (home page)\n    render() {\n        this.dataPromise\n            .then((jsonData) => {\n                let photographers = jsonData.photographers\n\n                this.renderHeader(photographers)\n                this.renderMain(photographers)\n            })\n    }\n\n    renderHeader(photographers) {\n        const header = this.createHeader()\n        this.appendLogo(header)\n        this.appendMainNav(photographers, header)\n\n        const main = document.querySelector(\"main\");\n        document.querySelector('body').insertBefore(header, main);\n    }\n\n    createHeader() {\n        const header = document.createElement('header');\n        header.className = 'header_home';\n        return header;\n    }\n\n    appendLogo(header) {\n        const logo = document.createElement('a');\n        logo.className = 'logo';\n        logo.innerHTML = `\n        <img class=\"logo_img\" src=\"/static/logo.svg\" alt=\"logo\" />\n        `;\n\n        header.appendChild(logo);\n    }\n\n    appendMainNav(photographers, header) {\n        const mainNav = document.createElement('nav');\n        mainNav.className = 'main_nav';\n\n        this.appendNavTags(photographers, mainNav)\n        header.appendChild(mainNav);\n    }\n\n    appendNavTags(photographers, nav) {\n        const allTags = photographers.map(photographer => photographer.tags).flat()\n        const distinctTags = [...new Set(allTags)] //remove duplicates\n\n        //add each tag dynamically in the nav\n        distinctTags.forEach(tag => {\n            const tagName = tag.charAt(0).toUpperCase() + tag.substring(1);\n            const headerTag = document.createElement('div');\n            headerTag.className = 'main_nav__item';\n\n            const checkboxTag = document.createElement('input');\n            checkboxTag.type = \"checkbox\";\n            checkboxTag.className = \"tag_checkbox\"\n            checkboxTag.id = tagName;\n            headerTag.appendChild(checkboxTag)\n\n            const labelTag = document.createElement('label');\n            labelTag.className = \"tag_name\"\n            labelTag.setAttribute(\"for\", tagName);\n            labelTag.innerHTML = `#${tagName}`;\n            headerTag.appendChild(labelTag)\n\n            nav.appendChild(headerTag);\n\n            //listen to clicks on main nav tags\n            headerTag.addEventListener(\"change\", () => {\n\n                if (checkboxTag.checked) {\n                this.clickedNavTags.push(tag);\n                this.clickedNavTags = [...new Set(this.clickedNavTags)];\n                } else {\n                    const currentIndex = this.clickedNavTags.indexOf(tag);\n                    this.clickedNavTags.splice(currentIndex, 1);\n                }\n                this.handleTagClick(photographers)\n            });\n        });\n    }\n\n    createLabel(forParam, textParam) {\n        const label = document.createElement('label');\n        label.setAttribute(\"for\", forParam);\n        label.innerHTML = `${textParam}`;\n        return label;\n    }\n\n    createInputField(id) {\n        const inputField = document.createElement('input');\n        inputField.className = 'input_field';\n        inputField.type = \"text\";\n        inputField.setAttribute(\"id\", id);\n        return inputField;\n    }\n\n    handleTagClick(photographers) {\n        this.removeAllThumbnails();\n        this.sortPhotographers(photographers)\n    }\n\n    removeAllThumbnails() {\n        const photographersNode = document.querySelector('.photographers')\n        for (let index = photographersNode.childNodes.length - 1; index >= 0 ; index--) {\n            const child = photographersNode.childNodes[index];\n            photographersNode.removeChild(child)\n        }\n    }\n\n    sortPhotographers(photographers) {\n        let selectedPhotographers = [];\n        this.clickedNavTags.forEach(clickedNavTag => {\n            photographers.forEach(photographer => {\n                if (photographer.tags.includes(clickedNavTag)) {\n                    selectedPhotographers.push(photographer)\n                }\n            });\n        });\n\n        if (this.clickedNavTags.length == 0) {\n            this.createArticle(photographers)\n        } else {\n            selectedPhotographers = [...new Set(selectedPhotographers)];\n            this.createArticle(selectedPhotographers)\n        }\n        \n    }    \n\n    renderMain(photographers) {\n        this.createMainTitle()\n        this.createArticle(photographers)\n    }\n\n    createMainTitle() {\n        const title = document.createElement('h1')\n        title.className = 'main_title'\n        title.innerHTML = `Nos photographes`\n        document.querySelector(\"main\").appendChild(title)\n    }\n\n    createArticle(photographers) {\n\n        photographers.forEach(photographer => {\n\n            const article = document.createElement('article')\n            article.className = 'article';\n            article.innerHTML = `<a class=\"photographer_thumbnail\" href=\"/photographers-profile/${photographer.id}\">`;\n\n            this.appendPhotographerThumbnailPicture(article, photographer);\n            this.appendPhotographerThumbnailContent(article, photographer);\n\n            document.querySelector('.photographers').appendChild(article);\n        });\n    }\n\n    appendPhotographerThumbnailPicture(article, photographer) {\n        const thumbnailPicture = document.createElement('a')\n        thumbnailPicture.className = 'photographer_thumbnail__picture';\n        thumbnailPicture.innerHTML = `\n        <img class=\"photographer_thumbnail__picture\"\n        src=\"/static/Photographers ID Photos/${photographer.portrait}\"\n        alt=\"photographer's thumbnail picture\" />`;\n\n        article.querySelector('.photographer_thumbnail').appendChild(thumbnailPicture);\n    }\n\n    appendPhotographerThumbnailContent(article, photographer) {\n        const thumbnailContent = document.createElement('div')\n        thumbnailContent.className = 'photographer_thumbnail__content';\n        thumbnailContent.innerHTML = `\n        <h2 class=\"photographer_name\">${photographer.name}</h2>\n        <h3 class=\"photographer_location\">${photographer.city}, ${photographer.country}</h3>\n        <p class=\"photographer_desc\">${photographer.tagline}</p>\n        <p class=\"photographer_price\">${photographer.price}€/jour</p>\n        <div class=\"tags\"></div>`;\n\n        photographer.tags.forEach(photographerTag => {\n            const tag = document.createElement('a')\n            tag.className = 'tags__item';\n            tag.innerHTML = `<span>#${photographerTag}</span>`\n            thumbnailContent.querySelector('.tags').appendChild(tag)\n        })\n\n        article.querySelector('.photographer_thumbnail').appendChild(thumbnailContent);\n    }\n}\n","import { PhotographerPageBuilder } from \"./PhotographerPageBuilder\";\nimport { HomePageBuilder } from \"./HomePageBuilder\";\n\nexport const PagesFactoryEnum = {\n    HOME: \"HOME\",\n    PHOTOGRAPHER : \"PHOTOGRAPHER\",\n}\n//Map[key] = value\nlet registeredPages = {};\nregisteredPages[PagesFactoryEnum.PHOTOGRAPHER] = PhotographerPageBuilder;\nregisteredPages[PagesFactoryEnum.HOME] = HomePageBuilder;\n\nexport class PageFactory {\n    getPage(type, props) {\n        return new registeredPages[type](props);\n    }\n}\n\n","export class DataFetcher {\n    constructor(dataSource) {\n        this.dataSource = dataSource; //json file\n    }\n\n    fetchSource() {\n        return fetch(this.dataSource) // ressource request\n            .then(function (resp) {\n                console.log(resp)\n                return resp.json(); \n            });\n    }\n}","import { PageFactory, PagesFactoryEnum } from './scripts/factory/PageFactory';\nimport { DataFetcher } from './scripts/utils/DataFetcher';\n\nconst dataFetcher = new DataFetcher('/static/FishEyeDataFR.json');\nconst jsonPromise = dataFetcher.fetchSource()\nconst pageFactory = new PageFactory();\n\nconst props = {\n    json: jsonPromise,\n};\n//possible routes\nconst routes = [\n    {\n        regex: /\\/{1}$/gm,\n        component: pageFactory.getPage(PagesFactoryEnum.HOME, props)\n    },\n    {\n        regex: /\\/[A-Za-z\\-]{1,}\\/[0-9]{0,3}?$/, \n        component: pageFactory.getPage(PagesFactoryEnum.PHOTOGRAPHER, props)\n    },\n];\n\nexport const router = () => {\n    const idPhotographer = location.pathname.split('/')[2];\n    routes.find(route => route.regex.test(location.pathname)).component.render(idPhotographer)\n};","import { router } from './Router';\n\nwindow.addEventListener('hashchange', router); // identifier of the URL changes\nwindow.addEventListener('load', router); // ressource has loaded","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}